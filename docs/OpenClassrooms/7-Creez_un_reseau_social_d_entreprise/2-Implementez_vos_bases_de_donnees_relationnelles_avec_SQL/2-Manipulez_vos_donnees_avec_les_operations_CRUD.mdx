---
sidebar_position: 3
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import { Vimeo } from 'mdx-embed';

# Manipulez vos donnÃ©es avec les opÃ©rations CRUD

## InsÃ©rez des donnÃ©es dans votre BDD

[InsÃ©rez des donnÃ©es dans votre BDD - ImplÃ©mentez vos bases de donnÃ©es relationnelles avec SQL - OpenClassrooms](https://openclassrooms.com/fr/courses/6971126-implementez-vos-bases-de-donnees-relationnelles-avec-sql/7142248-inserez-des-donnees-dans-votre-bdd)

<Vimeo vimeoId="497953029" />

<br />

Dans cette deuxiÃ¨me partie, vous allez dÃ©couvrir comment manipuler vos donnÃ©es. Ã€ chaque chapitre, vous apprendrez Ã  **crÃ©er**, **lire**,
**mettre Ã  jour** et **supprimer** des donnÃ©es. Câ€™est ce quâ€™on appelle les _opÃ©rations CRUD_.

<figure>
    <img src="https://user.oc-static.com/upload/2021/01/18/16109606135318_2c1-1_CRUD_static.png"
         alt="Create-CrÃ©er, Read-Lire, Update-Mettre Ã  jour, Delete-Effacer" />
    <figcaption>Lâ€™acronyme CRUD oÃ¹ MAJ signifie Mettre Ã€ Jour</figcaption>
</figure>

Votre base de donnÃ©es est bien vide pour lâ€™instant... ğŸ˜¢ Ne dÃ©sespÃ©rez pas, nous allons justement apprendre Ã  la remplir en y ajoutant un ou
plusieurs objets.

Commencez d'abord par tÃ©lÃ©charger la [base de donnÃ©e Foodly de cette partie 2](https://github.com/OpenClassrooms-Student-Center/Course-implementez-BDD-SQL/blob/master/partie_2/foodly.sql).
(Reportez-vous Ã  [cette section du cours](https://openclassrooms.com/fr/courses/6971126-implementez-vos-bases-de-donnees-relationnelles-avec-sql/7142232-creez-votre-base-de-donnees-bdd)
pour retrouver comment mettre Ã  jour votre BDD depuis GitHub).

Câ€™est parti !

### InsÃ©rez des objets uniques pour alimenter votre BDD

PremiÃ¨re Ã©tape : vous allez ajouter un utilisateur Ã  votre BDD, car une application sans utilisateurs nâ€™est pas une BDD.

> Imaginez quâ€™un nouvel utilisateur sâ€™inscrive sur Foodly. Comment lâ€™application ferait-elle pour inscrire cet utilisateur dans la base MySQL ?

:::info
Elle utiliserait la commande SQL **`INSERT INTO`**. Cette commande prend en compte :
- les paramÃ¨tres de la table dans laquelle vous souhaitez ajouter lâ€™objet (ici la table â€œutilisateurâ€) ;
- lâ€™ordre des colonnes (ou caractÃ©ristiques de lâ€™objet) ;
- ainsi que les valeurs correspondantes pour lâ€™objet.
:::

<figure>
    <img src="https://user.oc-static.com/upload/2021/01/18/16109606563636_2c1-2_insert-into_static.png"
         alt="SchÃ©ma reprÃ©sentant de gauche Ã  droite : un utilisateur qui s'inscrit et qui gÃ©nÃ¨re une commande INSERT INTO, qui est envoyÃ©e Ã  la BDD, puis qui intÃ©grÃ© dans l'application Foodly." />
    <figcaption>Insertion dâ€™un utilisateur dans la BDD de Foodly</figcaption>
</figure>

Souvenez-vous, votre table â€œutilisateurâ€ dispose de 4 champs :

| **Nom du champ** | **Descriptif du champ** | **Exemple de valeur** |
|------------------|-------------------------|-----------------------|
| _id_ | identifiant unique de l'utilisateur dans la BDD | 1 |
| _nom_ | nom de famille de l'utilisateur | Durantay |
| _prenom_ | prÃ©nom de l'utilisateur | Quentin |
| _email_ | email de l'utilisateur | quentin@gmail.com |

:::info
Remarquez que je ne me prÃ©occupe pas de lâ€™id. Je pourrais tout Ã  fait le renseigner. Mais souvenez-vous, nous lâ€™avons configurÃ© de maniÃ¨re Ã 
ce que MySQL lâ€™auto-incrÃ©mente pour nous. Du coup, soyons fainÃ©ants et laissons MySQL gÃ©rer ce paramÃ¨tre pour nous !
:::

Voici, par exemple, la commande pour mâ€™ajouter en tant quâ€™utilisateur dans la base :

```sql
INSERT INTO `utilisateur` (`nom`, `prenom`, `email`)
VALUES
('Durantay', 'Quentin', 'quentin@gmail.com');
```

:::caution
Si vous exÃ©cutez cette commande plusieurs fois, vous remarquerezÂ un message dâ€™erreur. Câ€™est tout Ã  fait normal. Souvenez-vous, lâ€™e-mail dâ€™un
utilisateur a Ã©tÃ© configurÃ© dans le schÃ©ma de la table comme une valeur **unique**. Vous ne pouvez donc pas crÃ©er un 2e utilisateur avec le
mÃªme e-mail.
:::

Voyons ensemble ce qui vient de se passer :
1. On indique en SQL quâ€™on souhaite ajouter un objet avec **`INSERT INTO`**.
2. On Ã©crit ensuite le nom de la table dans laquelle on souhaite ajouter lâ€™objet, ici â€œutilisateurâ€.
3. On Ã©crit ensuite entre parenthÃ¨ses la liste des colonnes que lâ€™on va ajouter, ainsi que leur ordre.
4. On ajoute le mot clÃ© SQL **`VALUES`** qui indique quâ€™on va ensuite dÃ©clarer les valeurs que lâ€™on souhaite ajouter.
5. On Ã©crit la liste des valeurs de lâ€™objet quâ€™on souhaite ajouter, dans **le mÃªme ordre** que les colonnes citÃ©es en 3.

Pour bien comprendre le fonctionnement de cette commande, je vous invite Ã Â â€œjouerâ€ avec en essayant dâ€™insÃ©rer dâ€™autres utilisateurs. Par
exemple vous-mÃªme. ğŸ˜‰

Vous pouvez aussi changer lâ€™ordre des colonnes et des valeurs pour voir si Ã§a fonctionne toujours !

### InsÃ©rez plusieurs objets Ã  la fois

Vous avez dÃ©sormais une application avec un utilisateur, mais il va vous en falloir plusieurs ! Je ne sais pas vous, mais je trouve Ã§a
fastidieux dâ€™avoir Ã  Ã©crire une commande pour chaque utilisateur que jâ€™ajoute.

SQL a pensÃ© Ã  nous ! Il est possible dâ€™**ajouter plusieurs objets en une seule commande** en sÃ©parant leurs valeurs par des virgules, comme
dans la commande ci-dessous grÃ¢ce Ã  laquelle jâ€™ajoute 4 utilisateurs Ã  la BDD :

```sql
INSERT INTO `utilisateur` (`nom`, `prenom`, `email`)
VALUES
('Doe', 'John', 'john@yahoo.fr'),
('Smith', 'Jane', 'jane@hotmail.com'),
('Dupont', 'Sebastien', 'sebastien@orange.fr'),
('Martin', 'Emilie', 'emilie@gmail.com');
```

Assez simple, non ?

Dans les faits, vous allez user et abuser de cette commande pour ajouter diffÃ©rents objets dans votre base. RÃ©utilisons-la justement pour
ajouter des aliments.

Souvenez-vous, la table â€œalimentâ€ est constituÃ©e des colonnes suivantes :

| **Nom du champ** | **Descriptif du champ** | **Exemple de valeur** |
|------------------|-------------------------|-----------------------|
| _id_ | identifiant unique de l'aliment dans la BDD | 1 |
| _nom_ | nom de l'aliment | poire |
| _marque_ | marque de l'aliment | Monoprix |
| _calories_ | nombre de calories contenues dans l'aliment (en kcal) | 72 |
| _sucre_ | la concentration en sucre de lâ€™aliment (en grammes) | 19,1 |
| _graisses_ | la concentration en graisses de lâ€™aliment (en grammes) | 0,2 |
| _proteines_ | la concentration en protÃ©ines de lâ€™aliment (en grammes) | 0,4 |

Voici la commande pour ajouter les aliments poire, pomme, Å“uf et lait dâ€™amande Ã  notre BDD :

```sql
INSERT INTO `aliment` (`nom`, `marque`, `sucre`, `calories`, `graisses`, `proteines`)
VALUES
('poire', 'monoprix', 27.5, 134, 0.2, 1.1),
('pomme', 'monoprix', 19.1, 72, 0.2, 0.4),
('oeuf', 'carrefour', 0.6, 82, 5.8, 6.9),
('lait d\'amande', 'bjorg', 4.5, 59, 3.9, 1.1, TRUE);
```

:::info
Vous vous demandez sÃ»rement pourquoi certaines valeurs sont entre guillemets simples, dâ€™autres entre backticks (`) et certaines sans rien.
:::

<figure>
    <img src="https://user.oc-static.com/upload/2021/01/18/16109607655779_2c1-3_ponctuation_static.png"
         alt="RÃ©capitulatif visuel du paragraphe rÃ©digÃ© ci-dessous" />
    <figcaption>La rÃ©daction des valeurs selon leur type</figcaption>
</figure>

Les explications sont simples :
- Pour signaler Ã  SQL des noms de tables ou colonnes, utilisez des backticks.
- Pour les valeurs de type texte (souvenez-vous, les types **TEXT** ou **VARCHAR**), vous devez les Ã©crire entre guillemets. Si un guillemet
est prÃ©sent dans le texte (comme dans lâ€™exemple plus haut avec 'lait d\'amande'), vous devez mettre un backslash (\) avant ce dernier pour dire
Ã  SQL quâ€™il fait partie intÃ©grante de la valeur.
- Pour le reste (les valeurs de type **BOOLEAN, INTEGER** ou **FLOAT**), pas besoin de guillemets !

### Ã€ vous de jouer !

Essayez maintenant de crÃ©er un nouvel aliment. Partons sur une boÃ®te de conserve de haricots verts. En voici les donnÃ©es nutritionnelles :

| **nom** | **marque** | **calories** | **sucre** | **graisses** | **proteines** | **bio** |
|---------|------------|--------------|-----------|--------------|---------------|---------|
| haricots verts | Monoprix | 25 | 3 | 0 | 1,7 | FALSE |

Ã€ partir de ce tableau, jâ€™aimerais que vous ajoutiez cet aliment dans la BDD de Foodly. Regardez bien comment nous nous y sommes pris jusquâ€™ici.
Je suis sÃ»r que vous pouvez le faire ! ğŸ™Œ

Retrouvez ici la correction de la commande pour ajouter votre conserve de haricots !

<Vimeo vimeoId="497578093" />

<br />

### En rÃ©sumÃ©

- On ajoute un objet Ã  une table avec la commande **`INSERT INTO`**.
- Lors de lâ€™utilisation de cette commande, on mentionne **quelles sont les colonnes (et dans quel ordre)** que lâ€™on va remplir. Et on **les
sÃ©pare par des virgules**.
- On peut ajouter **un ou plusieurs objets** Ã  la fois, lÃ  aussi, en **les sÃ©parant par des virgules**.

_Vous voici capable de crÃ©er des objets dans votre BDD, pour la remplir. Mais une fois ceux-ci dans la base, comment les rÃ©cupÃ©rer pour en lire
le contenu ? Câ€™est ce que vous allez voir dans le chapitre suivant !_

-----

## SÃ©lectionnezÂ les donnÃ©es prÃ©sentes dans votre BDD

[SÃ©lectionnezÂ les donnÃ©es prÃ©sentes dans votre BDD - ImplÃ©mentez vos bases de donnÃ©es relationnelles avec SQL - OpenClassrooms](https://openclassrooms.com/fr/courses/6971126-implementez-vos-bases-de-donnees-relationnelles-avec-sql/7142258-selectionnez-les-donnees-presentes-dans-votre-bdd)

![](https://user.oc-static.com/upload/2021/01/27/16117513909844_BANNERS_P2C2.png)

### Lisez les objets que vous venez de crÃ©er

:::note ?
Comment lire la totalitÃ© des objets dâ€™une table ?
:::

Vous venez dâ€™ajouter vos premiÃ¨res donnÃ©es dans votre BDD, câ€™est top ! Mais Ã  quoi cela servirait si vous ne pouvez pas les rÃ©cupÃ©rer par la
suite ?

Reprenons lâ€™exemple de lâ€™application Foodly. Lâ€™objectif des utilisateurs de cette application est de savoir quelle est la composition des
aliments quâ€™ils envisagent dâ€™acheter. Câ€™est bien beau dâ€™avoir une BDD, mais encore faut-il que lâ€™application puisse y lire les objets.

Câ€™est ce Ã  quoi on va sâ€™attaquer dans ce chapitre... Nous allons voir ensemble les commandes qui vous permettent de rÃ©cupÃ©rer et lire la donnÃ©e
contenue dans la base de Foodly.

CommenÃ§ons par une question simple : comment faire pour afficher tous les utilisateurs prÃ©sents dans votre BDD ?

Comme pour les commandes dâ€™insertion, vous allez devoir indiquer la table dans laquelle vous souhaitez rÃ©cupÃ©rer la donnÃ©e, ici â€œutilisateurâ€.

:::info
Le mot clÃ© pour rÃ©cupÃ©rer et lire de la donnÃ©e est **SELECT**. En commenÃ§ant une commande SQL par ce mot, MySQL (et les autres SGBD) comprend
que vous souhaitez sÃ©lectionner (et donc rÃ©cupÃ©rer) de la donnÃ©e.
:::

Tapez cette commande dans votre terminal :

```sql
SELECT * FROM utilisateur;
```

<figure>
    <img src="https://user.oc-static.com/upload/2021/01/17/16108775044064_image1.png"
         alt="Voici ce que vous devriez voir apparaÃ®tre aprÃ¨s avoir saisi la commande" />
    <figcaption>Voici ce que vous devriez voir apparaÃ®tre aprÃ¨s avoir saisi la commande</figcaption>
</figure>

Et lÃ , tadaa ! MySQL vous affiche la table â€œutilisateurâ€ sous forme de tableau rÃ©capitulatif, avec chaque objet sur sa propre ligne.

<figure>
    <img src="https://user.oc-static.com/upload/2021/01/18/16109610872927_2c2-1_static.png"
         alt="RÃ©capitulatif visuel du paragraphe rÃ©digÃ© ci-dessous" />
    <figcaption>La commande SELECT</figcaption>
</figure>

DÃ©cortiquons ensemble la commande que nous venons dâ€™effectuer pour arriver Ã  ce rÃ©sultat :
- **SELECT**, comme nous lâ€™avons vu, indique Ã  MySQL que nous souhaitons rÃ©cupÃ©rer de la donnÃ©e ;
- **\*** indique que lâ€™on souhaite rÃ©cupÃ©rer toutes les colonnes (ou champs) prÃ©sents dans cette table (ici : id, nom, prenom et email) ;
- **FROM** table permet Ã  MySQL de comprendre depuis quelle table nous souhaitons rÃ©cupÃ©rer de la donnÃ©e.

### Lisez quelques colonnes seulement

:::note ?
Câ€™est super Ã§a, mais je suis rÃ©ellement obligÃ© de rÃ©cupÃ©rer **toutes** les colonnes Ã  chaque fois ?
:::

Avant que je vous rÃ©ponde, tapez cette commande dans votre terminal :

```sql
SELECT `nom`, `prenom`, `email` FROM utilisateur;
```

Que remarquez-vous aprÃ¨s lâ€™avoir tapÃ©e ? Eh oui, la colonne **id** nâ€™est plus visible dans le tableau rÃ©capitulatif !

<figure>
    <img src="https://user.oc-static.com/upload/2021/01/17/16108777243186_image29.png"
         alt="Ã‰cran du terminal suite Ã  la commande saisie" />
    <figcaption>Ã‰cran du terminal suite Ã  la commande saisie</figcaption>
</figure>

De la mÃªme maniÃ¨re quâ€™on prÃ©cisait les colonnes que lâ€™on souhaitait ajouter avec INSERT, on peut prÃ©ciser celles que lâ€™on veut que
lâ€™application lise avec **SELECT**.

Pour cela, il suffit de mentionner les noms de colonnes que lâ€™on souhaite rÃ©cupÃ©rer aprÃ¨s le mot clÃ© **SELECT**, comme dans lâ€™exemple ci-dessus.

### Ã€Â votre tour dâ€™essayer !

Je vous propose de lister tous les noms et les calories associÃ©es pour chaque aliment prÃ©sent dans la BDD de Foodly. Comment feriez-vous ?

Je vous laisse essayer. Lorsque vous avez terminÃ©, regardez la correction avec le screencast ci-dessous.

<Vimeo vimeoId="497578135" />

<br />

### En rÃ©sumÃ©

- Les objets dâ€™une table se lisent avec la commande **SELECT FROM**.
- Lors de lâ€™utilisation de cette commande, on mentionne **quelles sont les colonnes** que lâ€™on veut afficher **en les sÃ©parant par des virgules**.

_Et voilÃ  ! Vous savez rÃ©cupÃ©rer et lire la donnÃ©e prÃ©sente dans votre base. Mais imaginons que vous souhaitiez modifier cette donnÃ©e. Comment
faire ? Câ€™est ce que vous allez voir dans le chapitre suivant._

-----

## Mettez Ã  jour les donnÃ©es de votre BDD

[Mettez Ã  jour les donnÃ©es de votre BDD - ImplÃ©mentez vos bases de donnÃ©es relationnelles avec SQL - OpenClassrooms](https://openclassrooms.com/fr/courses/6971126-implementez-vos-bases-de-donnees-relationnelles-avec-sql/7142260-mettez-a-jour-les-donnees-de-votre-bdd)

![](https://user.oc-static.com/upload/2021/01/26/16116829831612_BANNERS_%20P2C3.png)

### Mettez Ã  jour un objet en particulier

Admettons maintenant quâ€™un utilisateur souhaite mettre Ã  jour son e-mail via lâ€™application. Comment Foodly traduirait ceci en commande SQL pour
MySQL ?

Ici, le mot clÃ© magique est **`UPDATE`**, qui signifie â€œmise Ã  jourâ€ en anglais. PlutÃ´t logique. ğŸ˜‰

Tapez cette commande dans votre terminal pour changer lâ€™e-mail du premier utilisateur :

```sql
UPDATE `utilisateur` SET `email` = 'quentind@gmail.com' WHERE `id` = '1';
```

Vous devriez avoir un message qui confirme ce changement. Si vous lisez Ã  nouveau les donnÃ©es de votre BDD sur la table â€œutilisateurâ€, vous
remarquerez que lâ€™e-mail de lâ€™utilisateur avec lâ€™id 1 est celui quâ€™on vient de taper.

<figure>
    <img src="https://user.oc-static.com/upload/2021/01/18/16109611689416_2c3-1_static.png"
         alt="RÃ©capitulatif visuel du paragraphe rÃ©digÃ© ci-dessous" />
    <figcaption>La commande UPDATE</figcaption>
</figure>

DÃ©composons cette commande ensemble :

| **Mot clÃ©** | **Description** |
|-------------|-----------------|
| _UPDATE table_ | Signifie Ã  SQL que vous souhaitez mettre Ã  jour de la donnÃ©e dans votre BDD. Vous indiquez aussi la table dans laquelle se trouve(nt) le ou les objets que vous souhaitez modifier. |
| _SET colonne = valeur_ | Sert Ã  indiquer Ã  SQL quelles sont la ou les colonnes Ã  modifier, et quelles sont la ou les valeurs quâ€™elles doivent dÃ©sormais prendre. |
| _WHERE colonne = valeur_ | Câ€™est ce quâ€™on appelle un filtre. Vous allez les voir plus en dÃ©tail dans la partie 3, mais sachez quâ€™ils servent Ã  restreindre la commande en cours Ã  un ou des objets rÃ©pondant Ã  des conditions prÃ©cises. Ici, on va mettre Ã  jour uniquement lâ€™objet dont lâ€™id est 1, soit le premier utilisateur ! |

:::info
Il est tout Ã  fait possible dâ€™utiliser `UPDATE`Â sans filtres (sans `WHERE`). NÃ©anmoins, la commande modifierait tous les objets de notre table.
Câ€™est trÃ¨s rarement ce que lâ€™on souhaite. ğŸ˜¨
:::

### Ã€ vous de jouerÂ !

Nous avons oubliÃ© de prÃ©ciser le type de pomme vendue Ã  IntermarchÃ©. Il s'agit d'une pomme **golden**. Comment feriez-vous pour rectifier le
tir ?

Essayez de faire la modification dans votre terminal, puis regardez la correction avec le sccrencast :

<Vimeo vimeoId="497578156" />

<br />

### En rÃ©sumÃ©

- On met Ã  jour les objets dâ€™une table avec la commande **`UPDATE`**.
- Lors de lâ€™utilisation de cette commande, on mentionne **quelles sont les colonnes** quâ€™on souhaite mettre Ã  jour avec **`SET`**.
- Si on ne filtre pas avec **`WHERE`**, on risque de **mettre Ã  jour tous les objets** de la table. Ce qui est rarement ce que lâ€™on souhaite !

_Vous voici capable de modifier la donnÃ©e prÃ©sente dans votre BDD ! Allons encore plus loin : imaginez que vous souhaitiez supprimer de la
donnÃ©e. Vous allez voir dans le chapitre suivant comment cela se passe !_

-----

## Supprimez des objets dans votre BDD

[Supprimez des objets dans votre BDD - ImplÃ©mentez vos bases de donnÃ©es relationnelles avec SQL - OpenClassrooms](https://openclassrooms.com/fr/courses/6971126-implementez-vos-bases-de-donnees-relationnelles-avec-sql/7142266-supprimez-des-objets-dans-votre-bdd)

![](https://user.oc-static.com/upload/2021/01/26/16116830270273_BANNERS_%20P2C4.png)

### Supprimez un objet en particulier

Finissons par un dernier cas dâ€™usage. Admettons quâ€™un utilisateur souhaite se **dÃ©sinscrire** de Foodly. Il faudrait alors le supprimer de
votre BDD. Mais comment faire ?

:::info
Ici, le mot clÃ© est **`DELETE`**. Signifiant â€œsupprimerâ€ en anglais.
:::

:::caution !
Attention toutefois, cette commande est trÃ¨s simple Ã  utiliser, parfois trop mÃªme ! Une fois la donnÃ©e supprimÃ©e de votre BDD, impossible de la
rÃ©cupÃ©rer ! Ã€ utiliser avec **parcimonie**.
:::

Voici par exemple la commande pour supprimer le deuxiÃ¨me utilisateur :

```sql
DELETE FROM `utilisateur` WHERE `id` = '2';
```

Une fois cette commande effectuÃ©e, vous pouvez vÃ©rifier quâ€™elle a fonctionnÃ© en listant les utilisateurs (commande **`SELECT`**).

Vous nâ€™en nâ€™avez dÃ©sormais plus que 3, lâ€™ancien 2e ayant disparu (pour de bon) !

LÃ  aussi, il vaut mieux utiliser cette commande avec **`WHERE`** pour en limiter lâ€™effet. Si vous ne le faites pas, vous risqueriez de supprimer
tous les objets dâ€™une table ! Dans notre cas, adieu Ã  nos utilisateurs. ğŸ˜¨

### Ã€Â vous de jouer !

Bon, on va dire quâ€™on sâ€™est complÃ¨tement trompÃ© pour notre pomme golden. MÃªme en la modifiant prÃ©cÃ©demment dans la BDD de Foodly, les donnÃ©es
sont complÃ¨tement fausses. Comment feriez-vous pour la supprimer dÃ©finitivement de la BDD ?

Reprenez votre terminal et essayez de supprimer la pomme golden. VÃ©rifiez votre commande avec ce screencast :

<Vimeo vimeoId="497578180" />

<br />

### En rÃ©sumÃ©

- On supprime les objets dâ€™une table avec la commande **`DELETE`**.
- Si on ne filtre pas avec **`WHERE`**, on risque de **supprimer tous les objets** de la table. Ce qui est rarement ce que lâ€™on souhaite !

_Ajouter, lire, modifier, supprimerâ€¦ Vous maÃ®trisez dÃ©sormais les opÃ©rations CRUD ! Bravo ! ğŸ‘_

_Il est maintenant temps dâ€™apprendre comment effectuer des opÃ©rations SQL avancÃ©es pour donner du sens Ã  votre donnÃ©e. Câ€™est dans la partie
suivante que vous allez lâ€™apprendre !_

-----

## Quiz : Manipulez des donnÃ©es avec les opÃ©rations CRUD

[Manipulez des donnÃ©es avec les opÃ©rations CRUD - OpenClassrooms](https://openclassrooms.com/fr/courses/6971126-implementez-vos-bases-de-donnees-relationnelles-avec-sql/exercises/4008)

#### CompÃ©tences Ã©valuÃ©es

<i class="bi bi-check2-circle"></i> Manipuler des donnÃ©es avec les opÃ©rations CRUD

-----

#### Description

Reprenons notre BDD Moviz du prÃ©cÃ©dent quiz. Cette base doit contenir des films, or elle nâ€™en contient actuellement aucun !

Si vous ne lâ€™avez plus, voici le lien pour la tÃ©lÃ©charger : [https://github.com/OpenClassrooms-Student-Center/Course-implementez-BDD-SQL/blob/master/partie\_2/moviz.sql](https://github.com/OpenClassrooms-Student-Center/Course-implementez-BDD-SQL/blob/master/partie_2/moviz.sql).

Commencez donc par ajouter des films puis vous essaierez :
- de les lire depuis votre base ;
- de les modifier ;
- et enfin de les supprimer.

Pour rappel, voici le schÃ©ma de la table â€œfilmâ€ :

| **Nom du champ** | **Type du champ** | **Description du champ** |
|------------------|-------------------|--------------------------|
| _nom_ | VARCHAR(255) | le nom du film |
| _date_de_sortie_ | DATE | la date de sortie du film |
| _synopsis_ | TEXT | la description du scÃ©nario du film |
| _langue_ | VARCHAR(255) | la langue principale du film |
| _budget_ | INTEGER | le budget de production du film |

Et les trois films que lâ€™on va ajouter puis manipuler :

| **Nom** | **Date de sortie** | **Budget** | **Synopsis** | **Langue** |
|---------|--------------------|------------|--------------|------------|
| Titanic | 04 avril 1998 | 200Â 000Â 000Â $ | L'histoire du plus grand paquebot de son Ã©poque, et de sa funeste fin. | anglais |
| Skyfall | 26 octobre 2012 | 200Â 000 000Â $ | Dans cet Ã©pisode le plus sombre de la saga, James Bond retourne Ã  ses origines. | anglais |
| La La Land | 25 janvier 2017 | 30 000 000Â $ | Une histoire d'amour Ã  Los Angeles sous forme de comÃ©die musicale. | anglais |

Avant de passer aux questions suivantes, essayez de crÃ©er les trois films vous-mÃªme. Cela vous aidera grandement dans la comprÃ©hension du cours
et des questions.

De plus, manipuler le SGBD via le SQL dans la rÃ©alitÃ© est toujours bien plus efficace pour apprendre que de â€œsimplementâ€ rÃ©pondre Ã  des
questions. ğŸ˜‰

-----

#### Question 1 : Quelle commande crÃ©e les trois films ?

<i class="bi bi-circle"></i>

```sql
INSERT INTO `film` (`nom`, `budget`, `synopsis`, `langue`, `date_de_sortie`)
VALUES
(`Titanic`, `1998-04-04`, `L'histoire du plus grand paquebot de son Ã©poque, et de sa funestre fin.`, `anglais`, 200000000),
(`Skyfall`, `2012-10-26`, `Dans cet Ã©pisode le plus sombre de la saga, James Bond retourne Ã  ses origines.`, `anglais`, 200000000),
(`La La Land`, `2017-01-25`,  `Une histoire d'amour Ã  Los Angeles sous forme de comÃ©die musicale.`, `anglais`, 30000000);
```

<i class="bi bi-circle"></i>

```sql
UPDATE INTO `film` (`nom`, `date_de_sortie`, `synopsis`, `langue`, `budget`)
VALUES
(`Titanic`, `1997-04-04`, `L'histoire du plus grand paquebot de son Ã©poque, et de sa funestre fin.`, `franÃ§ais`, 15000000),
(`Skyfall`, `2015-10-26`, `Dans cet Ã©pisode le plus sombre de la saga, James Bond retourne Ã  ses origines.`, `allemand`, 85000000),
(`La La Land`, `2017-01-15`,  `Une histoire d'amour Ã  Los Angeles sous forme de comÃ©die musicale.`, `anglais`, 30000000);
```

<i class="bi bi-record-circle"></i>

```sql
INSERT INTO `film` (`nom`, `date_de_sortie`, `synopsis`, `langue`, `budget`)
VALUES
(`Titanic`, `1998-04-04`, `L'histoire du plus grand paquebot de son Ã©poque, et de sa funestre fin.`, `anglais`, 200000000),
(`Skyfall`, `2012-10-26`, `Dans cet Ã©pisode le plus sombre de la saga, James Bond retourne Ã  ses origines.`, `anglais`, 200000000),
(`La La Land`, `2017-01-25`,  `Une histoire d'amour Ã  Los Angeles sous forme de comÃ©die musicale.`, `anglais`, 30000000);
```

_La commande pour ajouter des objets est INSERT INTO, suivi de la table dans laquelle insÃ©rer les objets (ici, â€œfilmâ€), puis du nom des
colonnes que lâ€™on souhaite renseigner, et enfin, de VALUES, avec les valeurs de chaque objet dans lâ€™ordre des colonnes mentionnÃ© prÃ©cÃ©demment._

-----

#### Question 2 : Quelle commande permet de lire les titres et dates de sorties des films que lâ€™on vient dâ€™ajouter ?

<i class="bi bi-circle"></i> <code>SELECT * FROM film;</code><br />
<i class="bi bi-record-circle"></i> <code>SELECT `nom`, `date_de_sortie` FROM film;</code><br />
<i class="bi bi-circle"></i> <code>DELETE * FROM film;</code><br />
<br />

_SELECT, quand il est utilisÃ© avec des colonnes spÃ©cifiques (au contraire de â€œ*â€, qui signifie â€œtoutes les colonnesâ€), nâ€™affichera que les
colonnes mentionnÃ©es._

-----

#### Question 3 : Quelle serait la fin dâ€™une commande pour filtrer sur le film Titanic uniquement ?

<i class="bi bi-record-circle"></i> <code>WHERE `nom` = â€œTitanicâ€;</code><br />
<i class="bi bi-circle"></i> <code>WHERE `Titanic`:</code><br />
<i class="bi bi-circle"></i> <code>DELETE * FROM film;</code><br />
<br />

_Ici, WHERE, suivi de la condition sur le titre Ã©gal Ã  â€œTitanicâ€, restreindra la commande Ã  ce film uniquement._

-----

#### Question 4 : Si on utilisait UPDATE sans WHERE, que se passerait-il ?

<i class="bi bi-circle"></i> On supprimerait tous les objets dâ€™une table.<br />
<i class="bi bi-record-circle"></i> On mettrait Ã  jour tous les objets dâ€™une table.<br />
<i class="bi bi-circle"></i> Le commande ne fonctionnerait pas.<br />
<br />

_Par dÃ©faut, une commande UPDATE, mais aussi SELECT ou DELETE, sâ€™applique sur tous les objets dâ€™une table en lâ€™absence de WHERE._

-----

#### Question 5 : Quelle commande permet de mettre Ã  jour le budget de Skyfall ?

<i class="bi bi-record-circle"></i> <code>UPDATE `film` SET `budget` = 200500000 WHERE `nom` = â€œSkyfallâ€;</code><br />
<i class="bi bi-circle"></i> <code>INSERT INTO `film` SET `budget` = 200500000 WHERE `nom` = â€œSkyfallâ€;</code><br />
<i class="bi bi-circle"></i> <code>UPDATE `film` SET `budget` = 200500000 WHERE `nom` = â€œTitanicâ€;</code><br />
<br />

_La mise Ã  jour dâ€™un objet implique une commande UPDATE. SET sert Ã  indiquer la colonne que lâ€™on souhaite modifier, et avec quelle valeur.
Ensuite, on utilise WHERE pour filtrer sur le bon film._

-----

#### Question 6 : Quelle commande permet de supprimer La La Land ?

<i class="bi bi-circle"></i> <code>DELETE `film` WHERE `nom` = â€œLa La Landâ€;</code><br />
<i class="bi bi-record-circle"></i> <code>DELETE FROM `film` WHERE `nom` = â€œLa La Landâ€;</code><br />
<i class="bi bi-circle"></i> <code>DELETE `film`;</code><br />
<br />

_Supprimer implique la commande DELETE, puis FROM pour signaler dans quelle table supprimer lâ€™objet. Enfin, on filtre le bon objet avec WHERE._

