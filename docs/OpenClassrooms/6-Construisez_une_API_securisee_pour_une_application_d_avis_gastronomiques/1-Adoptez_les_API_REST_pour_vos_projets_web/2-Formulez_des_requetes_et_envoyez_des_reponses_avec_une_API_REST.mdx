---
sidebar_position: 3
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import { Vimeo } from 'mdx-embed';

# Formulez des requÃªtes et envoyez des rÃ©ponses avec une API REST

## Utilisez Postman pour formuler vos requÃªtes

[Utilisez Postman pour formuler vos requÃªtes - Adoptez les API REST pour vos projets web - OpenClassrooms](https://openclassrooms.com/fr/courses/6573181-adoptez-les-api-rest-pour-vos-projets-web/7498761-utilisez-postman-pour-formuler-vos-requetes)

<Vimeo vimeoId="390933946" />

<br />

### Identifiez les avantages de Postman

Vous savez dÃ©jÃ  quâ€™une API REST implique lâ€™envoi de **requÃªtes** du client Ã  lâ€™API, qui passe la requÃªte au serveur, lâ€™API rÃ©cupÃ¨re la
**rÃ©ponse** et la renvoie enfin au client. Dans ce chapitre, nous allons voir comment formuler ces requÃªtes grÃ¢ce Ã  [Postman](https://www.postman.com/).

Cette interface graphique est utilisÃ©e par de nombreux dÃ©veloppeurs. Elle facilite la construction de nos requÃªtes. Câ€™est donc lâ€™outil idÃ©al
pour tester des API sans devoir utiliser de code.

Câ€™est Ã©galement celui que nous allons utiliser dans ce cours !

:::note ?
OK, mais pourquoi utiliser Postman en particulier ?
:::

Parce que cette interface offre beaucoup dâ€™avantagesÂ :
- Vous pouvez lâ€™utiliser quel que soit le langage avec lequel vous programmez.
- Son interface utilisateur est simpleÂ : vous effectuez vos requÃªtes facilement.
- Vous nâ€™avez pas besoin de savoir coder, ou dâ€™utiliser une application.

### TÃ©lÃ©chargez Postman

Lâ€™heure est venue de vous lancer : [tÃ©lÃ©chargez Postman](https://www.getpostman.com/downloads/).Â 

Choisissez votre systÃ¨me dâ€™exploitation. Postman est disponible pour Linux, Windows et OS X. Les instructions sont en anglais. ![:)](https://openclassrooms.com/bundles/common/images/smiley/smile.png)

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342915919742_image39.png"
         alt="La page d'accueil de Postman : Ã  gauche de l'interface les icÃ´nes proposent de tÃ©lÃ©charger votre systÃ¨me d'exploitation." />
    <figcaption>La page d'accueil de Postman</figcaption>
</figure>

Une fois que vous lâ€™aurez fait, vous allez Ãªtre redirigÃ© sur une page pour tÃ©lÃ©charger le logiciel. Cliquez sur le bouton **Download the App**.

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342916538503_image54.png"
         alt="Le bouton de tÃ©lÃ©chargement de Postman pour MacBook" />
    <figcaption>Le bouton de tÃ©lÃ©chargement de Postman pour MacBook</figcaption>
</figure>

Parfait ! Et maintenant, passons Ã  la formulation des requÃªtes. ğŸ˜ƒ

### Formulez une requÃªte sur Postman

#### La structure dâ€™une requÃªte

Chaque requÃªte a une structure spÃ©cifique qui a cette formeÂ :

Verbe HTTP + URI + Version HTTP + Headers + Body (facultatif)

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342923226613_image51.png"
         alt="Une structure de requÃªte typique en 3 couches superposÃ©es : en bas le body, au milieu les Headers, au-dessus le verbe HTTP, l'URI et la version HTTP." />
    <figcaption>Une structure de requÃªte typique</figcaption>
</figure>

Lâ€™aspect peut varier en fonction du logiciel ou du langage utilisÃ©.

#### Visualisez une requÃªte sur Postman

Maintenant que vous avez lancÃ© le logiciel, regardons ensemble Ã  quoi ressemble une requÃªte sur Postman.

Vous devriez avoir cette vue :

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342917731495_image25.png"
         alt="Le champ utilisÃ© pour rÃ©aliser une requÃªte dans Postman est entourÃ© en vert dans l'onglet Workspaces de l'interface." />
    <figcaption>Champ utilisÃ© pour rÃ©aliser une requÃªte dans Postman</figcaption>
</figure>

HoulÃ â€¦ câ€™est un peu compliquÃ©, non ?

Pas de panique, dÃ©taillons ensemble chaque zone une Ã  une en suivant la structure dâ€™une requÃªteÂ :

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342918745995_image44.png"
         alt="Exemple de verbe HTTP avec GET : affichÃ© Ã  gauche." />
    <figcaption>Exemple de verbe HTTP avec GET</figcaption>
</figure>

##### Le verbe

CommenÃ§ons avec le verbe. Les **verbes HTTP** correspondent Ã  diffÃ©rents types dâ€™actions que vous pouvez accomplir avec votre requÃªte. Ceux
que vous rencontrerez le plus couramment sont **GET** (obtenir), **PUT** (mettre), **POST** (publier), et **DELETE** (supprimer). Ne vous y
attardez pas trop pour le moment, nous les Ã©tudierons tous plus en dÃ©tail plus tard !

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342919431006_image17.png"
         alt="Lâ€™URL dâ€™une requÃªte complÃ¨te comprend le nom de domaine : api.github.com, et l'URI (le chemin de la ressource) : /users/faceboook" />
    <figcaption>Lâ€™URL dâ€™une requÃªte complÃ¨te comprend le nom de domaine : api.github.com, et l'URI (le chemin de la ressource) : /users/faceboook</figcaption>
</figure>

##### Lâ€™URI

Passons Ã  lâ€™**URI**. Un URI est le moyen dâ€™identifier les ressources. Par exemple, si vous voulez voir tous les utilisateurs sur votre site
web, le path serait le suivantÂ :

`/users`

OK, mais imaginons que vous vouliez obtenir les informations dâ€™un utilisateur spÃ©cifique. Dans ce cas-lÃ , il vous faudrait prÃ©ciser son ID. On
obtiendrait quelque chose comme ceciÂ :

`users/:user_id`

:::note ?
Pourquoi on utilisait un nombre avant, et tout dâ€™un coup tu nous metsÂ  _:user\_id_ ? ğŸ¤”
:::

On utiliseÂ `:user\_id`Â pour matÃ©rialiser lâ€™ID de lâ€™utilisateur, câ€™est ce quâ€™on appelle un placeholder. En pratique, avec un ID rÃ©el, le path
ressemblerait plutÃ´t Ã  Ã§aÂ :Â `users/145`.

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342920531745_image62.png"
         alt="Les Headers Content-Type et Authorization sont affichÃ©s dans une requÃªte." />
    <figcaption>Headers dans une requÃªte</figcaption>
</figure>

Un **header** (ou **_en-tÃªte_**) vous permet de faire passer des informations supplÃ©mentaires sur le message. Par exempleÂ :
- De quel langage sâ€™agit-ilâ€‰?
- Ã€ quelle date lâ€™envoyez-vousâ€‰?
- Quel logiciel la personne utilise-t-elleÂ ?
- Quelle est votre clÃ© dâ€™authentificationÂ ?

Les headers sont reprÃ©sentÃ©s par une paire **clÃ© et valeur**, et il existe de nombreux types dâ€™options diffÃ©rents pour eux. Par exempleÂ :

Date : Mardi 19 Janvier 2019 18:15:41 GMT

Utilisateur-Agent : Mozilla/5.0 (Macintosh; Intel Mac OS X 10\_10\_5)

Vous pouvez consulter la [**liste complÃ¨te**](https://developer.mozilla.org/fr/docs/Web/HTTP/Headers) des diffÃ©rentes options pour lesÂ headers.

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342921751565_image52.png"
         alt="Le body (ou corps de message, en franÃ§ais) est affichÃ© depuis l'onglet Body de la requÃªte." />
    <figcaption>Le body (ou corps de message, en franÃ§ais)</figcaption>
</figure>

##### Le body

Pour finir, parlons du **body** ! Pour formuler une requÃªte, il nâ€™est utilisÃ© quâ€™avec **PUT** (mise Ã  jour) ou **POST** (crÃ©ation). Il contient
les donnÃ©es rÃ©elles de la ressource que vous essayez de crÃ©er ou de mettre Ã  jour. Les donnÃ©es sont envoyÃ©es sous format JSON.

Petit rappel : le JSON est largement utilisÃ©Â ; toutefois il se peut que certaines API nâ€™acceptent que le XML. Vous trouverez cette information
dans la documentation de lâ€™API que vous utiliserez.

Prenons un exemple ! Vous voulez ajouter ou mettre Ã  jour les informations dâ€™un utilisateurÂ ; vous ajouterez donc les dÃ©tails de lâ€™utilisateur
(prÃ©nom, nom , adresseâ€¦) dans le body, en JSON.

Notez que le body est facultatif dans ces deux cas. Cela signifie quâ€™il est tout Ã  fait possible dâ€™envoyer un body vide en fonction des actions
de lâ€™API visÃ©e.

Vous en apprendrez plus Ã  ce sujet dans les prochains chapitres. ğŸ•µğŸ»â€â™€ï¸

### Obtenez une rÃ©ponse avec Postman

Structure des requÃªtes âœ… ! Passons aux rÃ©ponses.

Le format du message de **rÃ©ponse** est trÃ¨s similaire Ã  celui de la requÃªteÂ :

Version HTTP + Code de rÃ©ponse HTTP + Headers + Body

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342922542899_image32.png"
         alt="Une structure de rÃ©ponse typique en 3 couches superposÃ©es : en bas le Body, au milieu le Header et au-dessus la version et le code HTTP." />
    <figcaption>Une structure de rÃ©ponse typique</figcaption>
</figure>

Dans Postman, vous verrez un message de rÃ©ponse comme celui-ciÂ :

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342924233035_image8.png"
         alt="Un message de rÃ©ponse typique de Postman est affichÃ© sur l'interface dans l'onglet Body." />
    <figcaption>Un message de rÃ©ponse typique</figcaption>
</figure>

:::note ?
Attends deux secondes... Le body ? Mais il n'est pas censÃ© Ãªtre utilisÃ© seulement pour faire une requÃªte avec POST et PUTÂ ? ğŸ¤”
:::

Pour formuler une requÃªte, oui ! Mais pour les rÃ©ponses, le **body** contient lâ€™information que vous avez demandÃ©e, et que lâ€™API vous renvoie.
Celle-ci est matÃ©rialisÃ©e au sein du body sous la forme dâ€™un JSON ou en XML. Lâ€™image ci-dessus montre une rÃ©ponse dâ€™une requÃªte rÃ©ussie, faite
Ã  lâ€™API GitHub.

:::note ?
Et si elle Ã©choue ? Que se passe-t-ilÂ ? On obtient une information diffÃ©renteÂ ? ğŸ¤”
:::

Exactement ! Si la requÃªte Ã©choue, le **body** peut contenir un message dâ€™erreurÂ :

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342925278833_image34.png"
         alt="Une requÃªte qui Ã©choue" />
    <figcaption>Une requÃªte qui Ã©choue</figcaption>
</figure>

Mais le message ne suffit pas, et entre nous il peut arriver que des API nâ€™envoient pas de messages du tout â€“ que la requÃªte soit un succÃ¨s ou
non. Cela peut arriver, mÃªme si câ€™est rareÂ ! Dans ce cas, votre meilleur alliÃ© sera le **code de rÃ©ponse HTTP**Â !

### Analysez le code de rÃ©ponse HTTP

Le code de rÃ©ponse HTTP aide le dÃ©veloppeur et/ou le client Ã  comprendre le **statut** de la rÃ©ponse. Jetons un Å“il sur les exemples obtenus avec PostmanÂ :

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342925714163_image67.png"
         alt="Un code de statut HTTP 200 OK pour une requÃªte rÃ©ussie" />
    <figcaption>Un code de statut HTTP pour une requÃªte rÃ©ussie</figcaption>
</figure>

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342925927817_image53.png"
         alt="Un code de statut HTTP 404 Not found pour un Ã©chec" />
    <figcaption>Un code de statut HTTP pour un Ã©chec</figcaption>
</figure>

Lorsquâ€™un client vous envoie une requÃªte comme Â«Â Salut, pourriez-vous mâ€™envoyer tous les tweets de cet utilisateurÂ ?Â Â», vous pouvez vous
reprÃ©senter le code de rÃ©ponse comme un feu de signalisation ğŸš¥ qui vous dit par exempleÂ :

**VERT âœ…** : Â« Cette requÃªte a Ã©tÃ© traitÃ©e avec succÃ¨s.Â Â»

ou

**ROUGE ğŸ”´** : Â« Nous nâ€™avons rien trouvÃ© pour cette requÃªteÂ !Â Â»

Il existe de nombreux codes de rÃ©ponse diffÃ©rents â€“ vous connaissez probablement le **404 not found** (ou _introuvable_, en franÃ§ais). Vous
lâ€™avez peut-Ãªtre vu sur quelques sites web. Par exemple, si vous essayez dâ€™aller sur une page qui nâ€™existe pas sur GitHub, vous verrez quelque
chose comme Ã§aÂ :

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/163429262514_image6.jpg"
         alt="Page de rÃ©ponse 404 GitHub" />
    <figcaption>Page de rÃ©ponse 404 GitHub</figcaption>
</figure>

Un autre code de rÃ©ponse important Ã  connaÃ®tre est le **200 OK** â€“ qui signifie que votre requÃªte a rÃ©ussi, et que votre rÃ©ponse est prÃªteÂ !
En gÃ©nÃ©ral, les rÃ¨gles de base pour les codes de rÃ©ponse HTTP sont les suivantesÂ :
- 100+ â¡ Information
- 200+ â¡ SuccÃ¨s
- 300+ â¡ Redirection
- 400+ â¡ Erreur client
- 500+ â¡ Erreur serveur

Les codes HTTP sont trÃ¨s codifiÃ©s, et chaque nombre correspond Ã  une rÃ©ponse particuliÃ¨re. De ce fait, toutes les API renverront une 404 si la
ressource est introuvable, et cela permet aux dÃ©veloppeurs de comprendre de quel type de rÃ©ponse il sâ€™agit. Câ€™est une sorte de nomenclature
gÃ©nÃ©rale respectÃ©e par tous.

Si vous avez un doute sur un code HTTP, nâ€™hÃ©sitez pas Ã  consulter [**cette documentation**](https://developer.mozilla.org/fr/docs/Web/HTTP/Status)
qui contient de plus amples informations et dÃ©tailsÂ !

### En rÃ©sumÃ©

- **Postman** est un logiciel gratuit qui vous permet dâ€™effectuer des requÃªtes API sans coder.
- Les requÃªtes prennent la forme suivanteÂ :<br />
Verbe HTTP + URI + Version HTTP + Headers + Body facultatif.
- Les verbes HTTP sont des types dâ€™**actions** que lâ€™on peut faire lors de la formulation dâ€™une requÃªte.
- Les rÃ©ponses prennent la forme suivante :<br />
Code de rÃ©ponse HTTP + Version HTTP + Headers + Body.
- Les codes de rÃ©ponse HTTP sont des sortes de **feux de signalisation** ğŸš¦ avec des codes spÃ©cifiques, pour informer les clients si la requÃªte
est un succÃ¨s ou un Ã©chec.
- Les codes HTTP sont codifiÃ©s en fonction du type de rÃ©ponseÂ ; vous trouverez la liste [ici](https://developer.mozilla.org/fr/docs/Web/HTTP/Status).

_Dans le chapitre suivant, nous allons remonter nos manches et commencer Ã  travailler avec de vraies APIÂ ! Pour que votre apprentissage soit le
plus efficace, il est important de connaÃ®tre les formats gÃ©nÃ©raux de requÃªtes et de rÃ©ponses, ainsi que de savoir Ã  quoi ressemble une rÃ©ponse
rÃ©ussie ou nonÂ !_

-----

## RÃ©alisez vos premiÃ¨res requÃªtes sur une API

[RÃ©alisez vos premiÃ¨res requÃªtes sur une API - Adoptez les API REST pour vos projets web - OpenClassrooms](https://openclassrooms.com/fr/courses/6573181-adoptez-les-api-rest-pour-vos-projets-web/6818136-realisez-vos-premieres-requetes-sur-une-api)

<Vimeo vimeoId="390933983" />

<br />

Dans le chapitre prÃ©cÃ©dent, nous avons parlÃ© des verbes HTTP et de la faÃ§on dont ils permettent de rÃ©aliser des **actions** spÃ©cifiques lors
de la formulation dâ€™une requÃªte API. Rappelez-vous, jâ€™avais mentionnÃ© GET, POST, PUT et DELETE. Eh bien, il est temps dâ€™en apprendre un peu
plus, et surtout de les utiliser ! ğŸ™Œ

### DÃ©couvrez le CRUD

Le CRUD est la liste des actions de base que vous pouvez effectuer sur une ressource. Câ€™est un acronyme qui signifie **_C_**_reate_ (crÃ©er),
**_R_**_ead_ (lire), **_U_**_pdate_ (mettre Ã  jour), et **_D_**_elete_ (supprimer). Bien que le CRUD ne constitue pas vraiment un mÃ©canisme
technique en soi, chaque **action CRUD** est associÃ©e Ã  un **verbe HTTP**. Voici la cartographie :

| **Action CRUD** | **Verbe HTTP associÃ©** |
|-----------------|------------------------|
| Create (CrÃ©er) | POST (Publier) |
| Read (Lire) | GET (Obtenir) |
| Update (Mettre Ã  jour) | PUT (Mettre) |
| Delete (Supprimer) | DELETE (Supprimer) |

### Obtenez des rÃ©sultats avec votre premiÃ¨re requÃªte GET

Maintenant que nous avons vu tout le contexte qui se cache derriÃ¨re une API, il est temps de pratiquer ! ğŸ‹ï¸â€â™€ï¸ Utilisons une API pour obtenir des
donnÃ©es. Nous utiliserons le verbe HTTP **GET** et lâ€™[API GitHub](https://developer.github.com/v3/) (de [GitHub](https://github.com/)) pour
obtenir des donnÃ©es sur un utilisateur GitHub spÃ©cifique.

:::info
GitHub est une plateforme quâ€™utilisent les dÃ©veloppeurs pour stocker leur code et travailler seul ou en Ã©quipe. Cela permet de faciliter la
collaboration entre dÃ©veloppeurs d'un mÃªme projet. En tant que dÃ©veloppeur, vous lâ€™utiliserez beaucoupâ€‰! Si vous Ãªtes curieux de connaÃ®tre son
fonctionnement, allez voir le cours [**GÃ©rez du code avec Git et GitHub**](https://openclassrooms.com/fr/courses/7162856-gerez-du-code-avec-git-et-github).
:::

Pour faire une requÃªte sur lâ€™API, utilisons le logiciel [Postman](https://www.getpostman.com/downloads/) que vous avez tÃ©lÃ©chargÃ© prÃ©cÃ©demment.

PrÃªtâ€‰? Allons- y ! ğŸš€

Commencez par ouvrir le programme.

Nous lâ€™avions survolÃ© lors du dernier chapitre, mais il est toujours bon de revoir ce que nous avons appris. DÃ©taillons un peu ce que nous
voyons, de haut en bas ! ğŸ•µï¸

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342941462718_image26.png"
         alt="Interface utilisateur Postman avec 3 encadrÃ©s : - En haut Ã  gauche, un menu dÃ©roulant encadrÃ© en noir - En-dessous : le bouton Params encadrÃ© en rouge - A droite du bouton : l'onglet Headers encadrÃ© en bleu" />
    <figcaption>Interface utilisateur Postman</figcaption>
</figure>

- La premiÃ¨re ligne (encadrÃ©e en noir) vous permet de sÃ©lectionner votre type de requÃªte dans le menu dÃ©roulant (dans notre cas, ce sera GET) ğŸ¤«.
- Ã€ cÃ´tÃ©, vous pouvez remplir la case avec lâ€™URL complÃ¨te de votre requÃªte.
- Il y a un petit bouton (encadrÃ© en rouge) nommÃ© _Params_. Si vous cliquez dessus, vous aurez un emplacement pour dÃ©finir les valeurs clÃ©s de
vos paramÃ¨tres.
- Ã€ droiteÂ (encadrÃ© en bleu), vous pouvez cliquer sur **Headers**. Cela vous permettra de dÃ©finir vos headers de requÃªte.
- Et pour finir, en dessous, en jaune, vous pouvez voir lâ€™emplacement du body de votre rÃ©ponse.

:::note ?
Nous voulons obtenir des informations sur un utilisateur. Mais comment faire ? Quelle URL utiliser ? ğŸ¤”
:::

Avant deÂ faire une requÃªte sur lâ€™API GitHub et d'obtenir un utilisateur en particulier, vous devez avant tout faire une chose trÃ¨s importante :
consulter la [documentation GitHub](https://developer.github.com/v3) ! Et plus prÃ©cisÃ©ment la section [Users](https://developer.github.com/v3/users/),
car câ€™est celle-ci qui nous intÃ©resse. La documentation, câ€™est le mode dâ€™emploi dâ€™une API. Câ€™est ainsi que vous trouverez les ressources, URI
et endpoints que vous pouvez utiliser pour rÃ©cupÃ©rer des donnÃ©es.

Allez sur la section Users de lâ€™API GitHub via cette URL : [https://developer.github.com/v3/users/](https://developer.github.com/v3/users/).

La partie qui nous intÃ©resse ici est celle qui nous permet dâ€™obtenir **un seul utilisateur** (Get a user en anglais). Cliquez dessus !

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342942349835_image66.png"
         alt="La documentation GitHub est affichÃ©e. A droite, Get a user est encadrÃ© en vert." />
    <figcaption>AccÃ©dez Ã  la documentation GitHub et cliquez sur Get a user</figcaption>
</figure>

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342942787421_image33.png"
         alt="Le texte correspondant Ã  la documentation sur l'utilisateur unique" />
    <figcaption>Le texte correspondant Ã  la documentation sur l'utilisateur unique</figcaption>
</figure>

Voici ce que dit la documentation en franÃ§ais :

> **Obtenir un utilisateur unique**
> 
> Fournit les informations disponibles publiquement sur quelquâ€™un ayant un compte GitHub.
> 
> Les applications GitHub avec la permission utilisateur Plan peuvent utiliser cet endpoint pour rÃ©cupÃ©rer des informations sur le plan GitHub
dâ€™un utilisateur. Lâ€™application GitHub doit Ãªtre authentifiÃ©e en tant quâ€™utilisateur. Voir Â«Â Identifier et autoriser les utilisateurs pour les
applications GitHubÂ Â» pour plus de dÃ©tails sur lâ€™authentification. Pour un exemple de rÃ©ponse, voir Â«Â RÃ©ponse avec lâ€™information du plan GitHubÂ Â».
> 
> La clÃ© e-mail dans la rÃ©ponse ci-dessous correspond Ã  votre adresse e-mail visible publiquement depuis votre page de profil GitHub. Lors de
la crÃ©ation de votre profil, vous pouvez sÃ©lectionner une adresse e-mail principale comme Â«Â publiqueÂ Â», ce qui fournit une entrÃ©e e-mail pour
cet endpoint. Si vous ne choisissez pas dâ€™adresse e-mail publique pour e-mail, alors sa valeur sera nulle. Vous ne voyez que les adresses e-mail
visibles publiquement lorsque vous Ãªtes authentifiÃ© dans GitHub. Pour plus dâ€™informations, voir Authentification.
> 
> Lâ€™API Emails vous permet de lister toutes vos adresses e-mail, et dâ€™ajouter un toggle Ã  une adresse e-mail principale pour quâ€™elle soit
visible publiquement. Pour plus dâ€™informations, voir Â«Â API EmailsÂ Â».

La documentation nous apprend plusieurs chosesÂ :
1. Cette section fournit les informations disponibles publiquement sur quelquâ€™un ayant un compte GitHub.
2. On peut accÃ©der aux informations dâ€™un utilisateur via **GET /users/:username**.
3. Un exemple de rÃ©ponse :

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342944095738_image55.png"
         alt="Un exemple de rÃ©ponse est affichÃ© et encadrÃ© au milieu de l'interface." />
    <figcaption>Un exemple de rÃ©ponse</figcaption>
</figure>

Parfait ! ğŸ™Œ

Si on rÃ©sume, cela signifie que, pour obtenir la donnÃ©e user de lâ€™utilisateur â€œtenderloveâ€ (oui oui câ€™est un vrai login, cet homme existe et
est dâ€™ailleurs un des contributeurs de [Ruby on Rails](https://rubyonrails.org/) ğŸ‘Œ), vous allez dans Postman et entrez
[https://api.github.com/users/tenderlove](https://api.github.com/users/tenderlove) dans lâ€™URL, puis appuyez sur Send (Envoyer).

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342945795506_image16.png"
         alt="La requÃªte GET est entourÃ©e en vert et contient une adresse HTTP." />
    <figcaption>RequÃªte GET</figcaption>
</figure>

Et voilÃ â€‰! Vous avez effectuÃ© votre premiÃ¨re requÃªte GET avec succÃ¨sâ€‰!

Vous pouvez remplacer tenderlove par votre login GitHub et observer la rÃ©ponse. ğŸ˜‰ Nâ€™hÃ©sitez pas Ã  comparer les donnÃ©es rÃ©cupÃ©rÃ©es par lâ€™API
et celles de GitHub : vous verrez, ce sont les mÃªmes !

Voici comment faire en vidÃ©o :

<Vimeo vimeoId="467403751" />

<br />

**GET** est le verbe HTTP le plus utilisÃ©. Il permet de faire une **requÃªte** afin de rÃ©cupÃ©rer un groupe de donnÃ©es mais aussi des donnÃ©es
prÃ©cises.Â Comme vous lâ€™avez vu avec lâ€™API GitHub, avec une requÃªte GET vous allez obtenir des donnÃ©es prÃ©cises grÃ¢ce Ã  un **ID** ; dans notre
exemple, votre nom dâ€™utilisateur GitHub. Notez la faÃ§on dont votre navigateur (ou client) utilise une API pour afficher les donnÃ©es sur un
site web. Ici, la rÃ©ponse est sous un format JSON.

:::info
Rappelez-vous, en JSON, la rÃ©ponse est affichÃ©e sous un format clÃ©-valeur.
:::

Vous pouvez mÃªme effectuer des requÃªtes GET directement depuis votre navigateur, car les endpoints REST utilisent le mÃªme protocole HTTP que le
web. Essayez dâ€™aller sur [**https://api.github.com/users/tenderlove**](https://api.github.com/users/tenderlove) maintenant, et vous verrezâ€‰!

### Utilisez la documentation pour connaÃ®tre le mode dâ€™emploi de lâ€™API

Comme vous pouvez le constater, la documentation dâ€™une API ressemble Ã  un manuel dâ€™utilisation trÃ¨s trÃ¨s dÃ©taillÃ©. Ã‰tant donnÃ© que chaque API
est diffÃ©rente, vous ne sauriez pas les utiliser sans une documentation claire et prÃ©cise.

:::note ?
Quelles informations nous donne cette documentation ? âœ‹
:::

La documentation liste tous les appels API possibles, les requÃªtes et rÃ©ponses typiques, mais surtout les verbes Ã  utiliser pour chaque requÃªte.
Cette [API Ghibli](https://ghibliapi.herokuapp.com/) constitue un bon exemple.

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342947406992_image59.png"
         alt="Documentation de lâ€™API Ghibli. A gauche, les rÃ©ponses renvoyÃ©es par l'API sont affichÃ©es, Ã  droite la rÃ©ponse s'affiche sous forme d'array." />
    <figcaption>Documentation de lâ€™API Ghibli</figcaption>
</figure>

Dans cet exemple, pour rÃ©cupÃ©rer tous les films Ghibli, vous voyez quâ€™il vous suffit de faire une requÃªte GET sur
[https://ghibliapi.herokuapp.com/films](https://ghibliapi.herokuapp.com/films). Vous avez aussi une indication sur les messages dâ€™erreur que
renvoie lâ€™API en cas de mauvais format de la requÃªte (400) ou dâ€™absence de ressources trouvÃ©es (404). Vous voyez aussi quâ€™en cas de succÃ¨s,
vous obtiendrez une rÃ©ponse sous forme dâ€™un **array** (ou tableau) qui contiendra la liste des films Ghibli. Un exemple de cette donnÃ©e se
trouve sur la droite dans lâ€™encadrÃ©.

:::info
Chaque fois que vous voulez utiliser une API, commencez par consulter la documentation.
:::

### En rÃ©sumÃ©

- CRUD signifie _create (crÃ©er), read (lire), update (mettre Ã  jour) et delete (supprimer)_.
- GET est le verbe HTTP pour obtenir des donnÃ©es, et il est gÃ©nÃ©ralement utilisÃ© avec un ID pour obtenir une donnÃ©e spÃ©cifique.
- Les applications utilisent GET pour prÃ©senter des informations sur des pages web.
- Utilisez Postman pour tester les API.
- La documentation est le manuel dâ€™utilisation dâ€™une API.
- La documentation vous permet de trouver la liste des endpoints accompagnÃ©e du verbe HTTP correspondant.

_Que ce soit Ã  des fins personnelles ou professionnelles, utiliser une API câ€™est utiliser des donnÃ©es. Ces donnÃ©es sont parfois sensibles et il
est important de les sÃ©curiser. Abordons Ã  prÃ©sent un Ã©lÃ©ment que je considÃ¨re comme **ultra important** : la sÃ©curitÃ© des donnÃ©es et
lâ€™authentification._

-----

## Authentifiez une API pour plus de sÃ©curitÃ©

[Authentifiez une API pour plus de sÃ©curitÃ© - Adoptez les API REST pour vos projets web - OpenClassrooms](https://openclassrooms.com/fr/courses/6573181-adoptez-les-api-rest-pour-vos-projets-web/6818386-authentifiez-une-api-pour-plus-de-securite)

<Vimeo vimeoId="390934009" />

<br />

### Comprenez lâ€™importance de lâ€™authentification pour une API

Avant dâ€™aborder dâ€™autres verbes HTTP, il est important que nous parlions davantage de lâ€™**authentification**. Lâ€™authentification constitue
simplement un moyen pour les API de garantir que le client a les **autorisations** nÃ©cessaires pour accÃ©der aux donnÃ©es et les manipuler. ğŸ”
Si je crÃ©e une API, je ne veux pas que nâ€™importe qui puisse changer le mot de passe de nâ€™importe quel utilisateur, nâ€™est-ce pas ? ğŸ”¥

Lorsque nous avions fait notre requÃªte **GET** avec lâ€™API GitHub, nous nâ€™avions pas besoin dâ€™authentification pour obtenir des donnÃ©es
utilisateurs. Pourquoi ? Rappelez-vous : il existe des API privÃ©es... etâ€¦ des API publiques !

:::note ?
Ah, GitHub est une API publique !
:::

Oui et non. GitHub est une API qui possÃ¨de **une partie publique** qui vous permet de faire des requÃªtes sans autorisation, comme nous lâ€™avons
fait dans le chapitre prÃ©cÃ©dent. Cependant, **toute lâ€™application nâ€™est pas publique**. Une partie des endpoints nÃ©cessite une authentification,
afin dâ€™avoir les autorisations nÃ©cessaires pour mettre Ã  jour des donnÃ©es.

Si vous voulez modifier, ajouter ou supprimer des donnÃ©es, GitHub doit vous donner lâ€™autorisation de le faire. Vous ne voulez pas que nâ€™importe
qui puisse remplacer votre photo de profil par celle de Homer Simpson, duh ! ğŸ© Donc, pour que ce soit possible, GitHub doit disposer dâ€™un
processus dâ€™**authentification**.

Une des mÃ©thodes dâ€™authentification les plus utilisÃ©es consiste Ã  exiger quâ€™un dÃ©veloppeur sâ€™inscrive par le site web de lâ€™API pour obtenir
**un token ou _clÃ©_**. Une fois le token obtenu, le dÃ©veloppeur lâ€™utilise dans sa requÃªte pour sâ€™identifier, et voilÃ . ğŸ‰

:::note ?
Câ€™est quoi un token, au juste ? Une sorte de code ? ğŸ¤”
:::

Eh bien, en quelque sorte ! Un token est gÃ©nÃ©ralement une chaÃ®ne longue et unique de lettres et de chiffres alÃ©atoires que lâ€™on assigne Ã  un
utilisateur. Le token est un peu comme un numÃ©ro de passeport : il est unique et permet de vous identifier. Lâ€™API peut donc lâ€™utiliser pour
savoir **qui** effectue la requÃªte, et surtout de quel niveau dâ€™**autorisation** cette personne dispose.

Les autorisations peuvent dÃ©crire des accÃ¨s spÃ©cifiques Ã  certaines fonctionnalitÃ©s, comme le nombre de requÃªtes que lâ€™on peut envoyer mais
aussi quelles actions on peut effectuer (si on est un administrateur ou non, par exemple)... La documentation de lâ€™API se doit de fournir
toutes les informations sur les fonctionnalitÃ©s accessibles Ã  travers un token dâ€™authentification.

:::note ?
Comment ajouter le token Ã  la requÃªte ? ğŸ¤”
:::

On lâ€™envoie soit dans les **paramÃ¨tres du header**, soit dans lâ€™endpoint lui-mÃªme.

Pour illustrer ce quâ€™on vient de voir, nous allons regarder ensemble comment obtenir un token GitHub pas Ã  pas !

Pour commencer, allez sur ce lien : [https://github.com/settings/tokens.](https://github.com/settings/tokens)

Vous devriez obtenir cette page :

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/1634295159695_image15.png"
         alt="Page GitHub" />
    <figcaption>Page GitHub qui vous permet d'obtenir un token</figcaption>
</figure>

Vous Ãªtes Ã  prÃ©sent sur la partie qui vous permet de demander Ã  GitHub de vous donner un token afin de pouvoir effectuer des opÃ©rations via
lâ€™API GitHub.

Cliquez sur **Generate new token**.

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342952140365_image23.png"
         alt="Page GitHub pour gÃ©nÃ©rer un token : Les Ã©lÃ©ments Note, repo et delete_repo sont encadrÃ©s en vert." />
    <figcaption>GÃ©nÃ©ration d'un token</figcaption>
</figure>

Dans notre cas, nous voulons que GitHub nous donne lâ€™autorisation pour deux choses :
1. Effectuer des actions sur les repositories GitHub.
2. Supprimer des repositories GitHub.

:::info
Un repo (**repository**, ou _rÃ©pertoire_) est un espace de stockage pour le code dans GitHub. Si vous voulez en savoir plus Ã  ce sujet,
consultez ce [**chapitre**](https://openclassrooms.com/fr/courses/7162856-gerez-du-code-avec-git-et-github/7165707-saisissez-lutilite-des-depots-distants-sur-github)
du cours **GÃ©rez du code avec Git et GitHub**.
:::

Suivez lâ€™exemple ci-dessus et nâ€™oubliez pas dâ€™inscrire dans la section **Note** une information qui vous permettra plus tard de vous souvenir Ã 
quoi servait ce token. Cela peut Ãªtre le nom dâ€™une application, de votre API, etc. Dans mon cas, jâ€™ai indiquÃ© OpenClassrooms.ğŸ˜„ Cliquez ensuite
sur **Generate token** (gÃ©nÃ©rer un token), et tada ! ğŸ‰

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342953687326_image9.png"
         alt="Le ruban de gÃ©nÃ©ration de token est affichÃ© au milieu." />
    <figcaption>GÃ©nÃ©ration de token</figcaption>
</figure>

Votre token sera visible Ã  lâ€™emplacement du marqueur noir. Jâ€™ai choisi de masquer le mien. ğŸ™Š

:::info
Un token est personnel et privÃ© autant que votre code de carte bleue, alors gardez-le pour vous !
:::

Lâ€™encadrÃ© bleu explique qu'il faut copier votre token personnel car vous ne serez plus en mesure de le voir.

:::caution
Gardez-le prÃ©cieusement et **copiez-le**, ou faites une capture dâ€™Ã©cran afin de ne pas le perdre. Nous allons lâ€™utiliser dans les chapitres
suivants ! ğŸ™‹ğŸ»â€â™€ï¸
:::

AprÃ¨s avoir copiÃ© soigneusement votre token, rechargez la page. Vous devriez voir apparaÃ®tre comme ci-dessus votre nouveau token par le nom que
vous lui avez attribuÃ© ; dans mon cas : Open Classrooms. Vous verrez aussi les actions quâ€™il vous permet de faire sur lâ€™API GitHub ; dans notre
cas, les deux que nous avons sÃ©lÃ©ctionnÃ©s : *delete_repo* et *repo*.

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342954768847_image60.png"
         alt="Actions possibles avec le token : delete_repo et repo. Ici, OpenClassroooms__delete_repo, repo est encadrÃ© en vert." />
    <figcaption>Actions possibles avec le token</figcaption>
</figure>

Nous avons vu ensemble comment utiliser des API. Sauf que les API peuvent Ãªtre crÃ©Ã©es par des entreprises, des services, ou des dÃ©veloppeurs
indÃ©pendants. Comment Ãªtre certain quâ€™elles sont fiables ?

### PrivilÃ©giez la sÃ©curitÃ© : choisissez vos API avec discernement

Comme vous lâ€™avez appris prÃ©cÃ©demment, il existe des milliers dâ€™API diffÃ©rentes que vous pouvez utiliser dans vos projets. Comme toujours, il
est important de garder en tÃªte la sÃ©curitÃ© de vos donnÃ©es et de votre application. En tant que dÃ©veloppeur, vous Ãªtes responsable de la
sÃ©curitÃ© des donnÃ©es de vos utilisateurs ! Vous devez vous assurer que vos API proviennent dâ€™une source fiable.

:::note ?
Mais comment faire ? Comment puis-je savoir si une API est fiable ou non ? ğŸ¤”
:::

Il existe quelques mÃ©thodes simples et rapides pour vÃ©rifier si une API est fiable ou non. Les API de qualitÃ© auront plusieurs mesures de
sÃ©curitÃ© comme **lâ€™authentification, lâ€™autorisation et le cryptage**. Elles auront aussi Ã©tÃ© mises Ã  jour rÃ©cemment ; vous saurez donc quâ€™elles
sont mises Ã  jour en fonction des derniers standards de sÃ©curitÃ©.

Prenons un exemple ! Sur GitHub, vous trouverez lâ€™API PokÃ©mon nommÃ©e [PokeApi](https://github.com/PokeAPI/pokeapi/) qui a Ã©tÃ© mise Ã  jour
rÃ©cemment. ğŸ‘‡

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342955631865_image4.png"
         alt="Un exemple dâ€™une API mise Ã  jour rÃ©cemment #PokeApi est affichÃ© et encadrÃ© en vert." />
    <figcaption>Un exemple dâ€™une API mise Ã  jour rÃ©cemment #PokeApi</figcaption>
</figure>

Vous pouvez constater sur leur GitHub que la date de leur dernier commit est assez rÃ©cente ; vous savez donc que cette API est maintenue et
mise Ã  jour. ğŸ˜‰

Avant chaque utilisation dâ€™une API externe, vÃ©rifiez la date de la derniÃ¨re mise Ã  jour sur GitHub ou bien sur leur site Internet, lisez la
documentation et si vous avez des doutes (ou non), regardez en ligne des avis ou posez simplement la question Ã  un autre dÃ©veloppeur.

### En rÃ©sumÃ©

- Pour obtenir un token dâ€™authentification GitHub, vous pouvez :
    - aller sur [https://github.com/settings/developers](https://github.com/settings/developers) et cliquer sur **Personal Access Tokens**
    (tokens dâ€™accÃ¨s personnel) ;
    - cliquer sur **Generate new token** (gÃ©nÃ©rer nouveau token) et saisir Â«â€‰Open Classroomsâ€‰Â» dans les notes ;
    - vous verrez alors toutes les diffÃ©rentes options dâ€™autorisation dont vous voulez doter votre API ;
    - choisissez toutes celles que vous voulez tester. Nous avons utilisÃ© Repo et Delete (supprimer) ;
    - cliquez sur **Generate token** (gÃ©nÃ©rer token) et obtenez votre token API personnel ; ğŸ‘
    - assurez-vous de copier et sauvegarder ce token, car nous lâ€™utiliserons par la suite.
- Lâ€™authentification est nÃ©cessaire pour garantir que seules les personnes avec les _autorisations adÃ©quates_ peuvent accÃ©der Ã  votre API.
- Les clÃ©s ou tokens API sont couramment utilisÃ©s dans une requÃªte pour authentifier un utilisateur.
- Assurez-vous de bien vÃ©rifier la fiabilitÃ© dâ€™une API avant de lâ€™utiliser.
- Vous pouvez trouver les indications de mise Ã  jour dâ€™une API sur GitHub ou sur son site Internet.

_GET nâ€™a plus de secret pour vous, vous avez crÃ©Ã© votre compte GitHub et obtenu votre premier token. Il est temps de passer Ã  la vitesse
supÃ©rieure et de jouer avec lâ€™API GitHub ! ğŸš€_

-----

## EntraÃ®nez-vous avec lâ€™API GitHub

[EntraÃ®nez-vous avec lâ€™API GitHub - Adoptez les API REST pour vos projets web - OpenClassrooms](https://openclassrooms.com/fr/courses/6573181-adoptez-les-api-rest-pour-vos-projets-web/6820251-entrainez-vous-avec-l-api-github)

<Vimeo vimeoId="390934047" />

<br />

### Manipulez des donnÃ©es avec lâ€™API GitHub

On avance, on avance ! Maintenant que vous avez un token dâ€™authentification, vous pouvez utiliser lâ€™API pour mettre Ã  jour votre profil GitHub !

Dans ce chapitre, nous allons pratiquer et utiliser le reste des opÃ©rations CRUD â€“ Create (crÃ©er), Update (mettre Ã  jour) et Delete (supprimer) â€“
et leurs verbes HTTP Ã©quivalents â€“ POSTÂ (publier),Â PUT (mettre) et DELETE (supprimer).

:::info
Je vous invite vivement Ã  suivre pas Ã  pas les Ã©tapes suivantes et Ã  pratiquer afin de maximiser votre apprentissage. ğŸ’ª
:::

### CrÃ©ez un repo GitHub avec la mÃ©thode POST

Pour **crÃ©er** quelque chose de nouveau, ou une nouvelle ressource, on utilise le verbe HTTP **POST** (publier). Quâ€™il sâ€™agisse dâ€™un nouveau
tweet, dâ€™une nouvelle photo ou dâ€™une nouvelle _publication_ (vous comprenez ? ğŸ˜‰). Par exemple, dÃ¨s que vous remplissez un formulaire en ligne
ou que vous en utilisez un pour vous inscrire et vous crÃ©er un nouveau compte, le verbe associÃ© par dÃ©faut est POST.

:::note ?
Comment lâ€™API sait-elle ce quâ€™on essaie de **crÃ©er** quelque choseâ€‰? ğŸ¤”
:::

Câ€™est lÃ  quâ€™intervient le **body** ! Vous vous souvenez ? On lâ€™a vu dans les chapitres prÃ©cÃ©dents. Le body accompagne les requÃªtes POST et PUT
pour contenir des informations supplÃ©mentaires. Vous pouvez intÃ©grer les donnÃ©es que vous voulez crÃ©er dans le body de votre requÃªte en
utilisant du **JSON**.

Mettons tout Ã§a en pratique ; je vous assure que Ã§a fera sens ! ğŸ’ª

On veut crÃ©er un nouveau repo sur GitHub pour notre API. Super, mais comment faire ? 1re Ã©tape : la documentation !

Regardons ce que nous dit la documentation GitHub au sujet des repositories : [https://developer.github.com/v3/repos](https://developer.github.com/v3/repos/#create).

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342958184705_image48.png"
         alt="Documentation GitHub concernant les repositories : l'article" />
    <figcaption>Documentation GitHub concernant les repositories</figcaption>
</figure>

HoulÃ , on a beaucoup de choix ! Nous, ce quâ€™on veut, câ€™est crÃ©er un nouveau repo. Cliquez en bas Ã  droite sur
[**Create a repository for the authenticated user**](https://docs.github.com/en/rest/reference/repos#create-a-repository-for-the-authenticated-user).

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342958978969_image20.png"
         alt="Documentation pour crÃ©er un nouveau repo. 3 Ã©lÃ©ments sont encadrÃ©s en vert : - En haut," />
    <figcaption>Documentation pour crÃ©er un nouveau repo</figcaption>
</figure>

Dans le premier encadrÃ© en vert, on peut lire _â€œCrÃ©e un nouveau repository pour un utilisateur authentifiÃ©â€._

Pour crÃ©er un nouveau repository, il faut faire une requÃªte **POST** vers **/user/repos**.

Parfait, on avance ! Maintenant, scrollez un peu et vous tomberez sur les paramÃ¨tres.

Lâ€™encadrÃ© vert vous montre que le paramÃ¨tre **name** est obligatoire.

Mais ce nâ€™est pas tout ! La documentation nous donne un exemple de requÃªte et de rÃ©ponse rÃ©ussies.

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342959575963_image43.png"
         alt="Une rÃ©ponse rÃ©ussie est affichÃ©e et entourÃ©e en vert." />
    <figcaption>Une rÃ©ponse rÃ©ussie</figcaption>
</figure>

Nous avons notre endpoint, notre verbe http, nos paramÃ¨tres et mÃªme un exemple ! Allons faire cette requÃªte. ğŸ™ŒLancez Postman !

SÃ©lectionnez POST dans le menu dÃ©roulant puis tapez lâ€™endpoint pour crÃ©er un nouveau repo via lâ€™API GitHub :
[https://api.github.com/user/repos](https://api.github.com/user/repos) ; et appuyez sur Send.

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/1634296038817_image22.png"
         alt="Un message d'erreur est affichÃ© et encadrÃ©e en vert." />
    <figcaption>Message d'erreur</figcaption>
</figure>

:::note ?
Arf, mais on a une erreur. Quâ€™est-ce que câ€™est ? ğŸ¤”
:::

Le message nous indique quâ€™une authentification est nÃ©cessaire. Le code de rÃ©ponse HTTP est 401 : Unauthorized (401 Non autorisÃ©). Eh oui,
notre token ! ğŸ˜„

Reprenez votre token dâ€™authentification API GitHub, celui que vous avez prÃ©cieusement gardÃ©. Ajoutez-le, comme sur lâ€™image suivante, dans
lâ€™onglet Headers sous forme de clÃ©-valeur oÃ¹ la clÃ© sera Authorization et la valeur sera Token, votre token. Si mon token est _abcde_, alors la
valeur sera : _token abcde_.

Ensuite, appuyez sur Send et regardez la rÃ©ponse. ğŸ‘‡ğŸ¼

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342961228461_image41.png"
         alt="Statut de la requÃªte avec le token : Ã  droite" />
    <figcaption>Statut de la requÃªte avec le token</figcaption>
</figure>

Encore une erreur ?! Mmmh... on a le bon endpoint, le token. Cette fois-ci, le code de rÃ©ponse HTPP est : 400 Bad Request. Mais oui ! Il nous
manque les paramÃ¨tres ğŸ™„. Eh oui, on demande Ã  GitHub de nous crÃ©er un repo, mais on ne lui donne pas les informations.

Cliquez sur la section Body, puis sur Raw, binary et sÃ©lectionnez JSON.

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/18/16345469127628_image44.png"
         alt="Interface affichÃ©e depuis l'onglet Body. JSON est affichÃ© et encadrÃ© dans une liste dÃ©roulante." />
    <figcaption>SÃ©lectionnez JSON</figcaption>
</figure>

Maintenant, on peut ajouter nos paramÃ¨tres sous forme de clÃ©-valeur. Il nous faut un nom de repo qui est obligatoire, et ajoutons une
description.

```json
{
    "name": "OpenClassrooms API",
    "description": "Nouveau repo !"
}
```

Appuyez sur Send et observez la rÃ©ponse. ğŸ‘‡ğŸ¼

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342964698404_image12.png"
         alt="Le repo a Ã©tÃ© crÃ©Ã©" />
    <figcaption>Le repo a Ã©tÃ© crÃ©Ã©</figcaption>
</figure>

Wooohooo, notre repository a Ã©tÃ© crÃ©Ã© ğŸ‰. Le code de rÃ©ponse HTTP est bien 201 Created. Lâ€™API nous renvoie les informations du nouveau repo
crÃ©e. On peut aussi vÃ©rifier sur GitHub si le repo apparaÃ®t bien dans notre liste, et câ€™est le cas ! ğŸ‘‡ğŸ¼ğŸ‰

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342965053232_image7.png"
         alt="VÃ©rification de la crÃ©ation du repo : le repo GitHub crÃ©Ã© est affichÃ© et encadrÃ© en vert." />
    <figcaption>VÃ©rification de la crÃ©ation du repo</figcaption>
</figure>

Pour **crÃ©er** un repo GitHub en utilisant lâ€™API GitHub, nous avons :
- consultÃ© la [documentation](https://api.github.com/user/repos) GitHub pour trouver l'endpoint adaptÃ© : POST user/repos ;
- ajoutÃ© notre token dâ€™authentification Ã  nos paramÃ¨tres dans le header avec Postman ;
- ajoutÃ© les dÃ©tails de notre repo Ã  notre body en JSON avec Postman ;
- vu quâ€™une fois que nous avons effectuÃ© une requÃªte rÃ©ussie avec notre API, le repo est apparu sur lâ€™UI de notre profil GitHubâ€‰!

Consultez la vidÃ©o pour revoir comment faire :

<Vimeo vimeoId="467403788" />

<br />

Et voilÃ  ! Vous avez un nouveau repo ! Et si maintenant on essayait de le modifier avec lâ€™API GitHub ? ğŸ’ª

### Mettez Ã  jour un repo GitHub avec les mÃ©thodes PUT/PATCH

Vous avez **crÃ©Ã©** votre repo GitHub, mais la description ne vous plaÃ®t plus trop, vous changez dâ€™avis et vous voulez la modifier ! Vous pouvez
utiliser PUT pour **mettre Ã  jour** une ressource dÃ©jÃ  existante dans votre API.

:::note ?
Sur Internet, on croise souvent PUT avec PATCH ? Les deux signifient la mÃªme chose ou est-ce quâ€™ils sont diffÃ©rents ? ğŸ¤”
:::

- PUT : met Ã  jour la ressource complÃ¨te (câ€™est-Ã -dire, remplace tout).
- PATCH : met Ã  jour uniquement la partie de la ressource qui a Ã©tÃ© envoyÃ©e.

On ne va pas sâ€™attarder ici sur la diffÃ©rence entre les deux. Mais si vous ne savez pas lequel utiliser et pour quelle situation : consultez la
documentation de lâ€™APIâ€‰!

Et câ€™est ce que nous allons faire ! Reprenons la documentation des repos GitHub mais cette fois-ci cliquons sur
[Update a repository](https://docs.github.com/en/rest/reference/repos#update-a-repository).

Pour mettre Ã  jour un repo, il nous faut utiliser la mÃ©thode PATCH sur lâ€™endpoint /repos/:Owner/:repo.

Les deux points ( : ) devant _owner_ et _repo_ signifient quâ€™il nous faut lâ€™identifiant unique du repository que vous voulez modifier, et celui
du owner (propriÃ©taire) du repo : vous, en l'occurrence.

Changez le verbe par PATCH. Puis entrez lâ€™endpoint correspondant. Mon username est Kadaaran et mon repo se nomme OpenClassrooms-API. Changez
Kadaaran par votre username et OpenClassrooms-API par votre nom de repo sâ€™il est diffÃ©rent. Dans la section Body, tapez une nouvelle description.
Dans mon cas, jâ€™ai mis : Paragraphe ci-dessus Ã  revoir.

```json
{
    "description": "Ceci est une nouvelle description plus cool que la prÃ©cÃ©dente â˜€ï¸"
}
```

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342967079435_image10.png"
         alt="Changement de la description encadrÃ© en vert." />
    <figcaption>Changement de la description</figcaption>
</figure>

Appuyez sur Send et regardez la rÃ©ponse. ğŸ‘‡ğŸ¼

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/1634296894872_image31.png"
         alt="Description mise Ã  jour et entourÃ©e en vert dans l'interface." />
    <figcaption>Description mise Ã  jour</figcaption>
</figure>

Notre repo a Ã©tÃ© mis Ã  jour ! ğŸ‰ Nous obtenons la rÃ©ponse avec le body : le code de rÃ©ponse HTTP est bien 200 OK.

Vous pouvez vÃ©rifier sur GitHub et vous devriez voir votre nouvelle description apparaÃ®tre. ğŸ‘‡ğŸ¼

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342969646845_image45.png"
         alt="La nouvelle description est affichÃ©e au milieu du screenshot." />
    <figcaption>La nouvelle description</figcaption>
</figure>

Pour **mettre Ã  jour** un repo GitHub, nous avons :
- vÃ©rifiÃ© la documentation GitHub pour lâ€™URI appropriÃ© : PATCH /repos/wner/:repo ;
- utilisÃ© Postman, changÃ© notre verbe HTTP en PATCH, et saisi le propriÃ©taire et le nom de repository que nous voulons modifier, ainsi que
changÃ© la description dans le body ;
- vu la nouvelle description de notre repository dans notre UI GitHub

<Vimeo vimeoId="467403787" />

<br />

Bravo ! Vous avez crÃ©Ã© un repo, puis vous lâ€™avez modifiÃ©. Essayons Ã  prÃ©sent de le supprimer ! ğŸ’ª

### Supprimez votre repo GitHub avec la mÃ©thode DELETE

Vous dÃ©cidez Ã  prÃ©sent que vous nâ€™avez pas rÃ©ellement besoin de votre repo GitHub â€“ alors allez-y et supprimez-le avec DELETE !

Allez hop ! On reprend la mÃªme gymnastique que pour les requÃªtes prÃ©cÃ©dentes. Tout dâ€™abord : la documentation ! Comment supprime-t-on un
repository GitHub ?

Dans la liste des mÃ©thodes disponibles, nous trouvons : [Delete a repository](https://docs.github.com/en/rest/reference/repos#delete-a-repository).
Cliquez dessus !

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342970351174_image38.png"
         alt="Documentation pour supprimer un repo" />
    <figcaption>Documentation pour supprimer un repo</figcaption>
</figure>

Selon la documentation, pour supprimer un repository GitHub, il nous faut utiliser le verbe DELETE sur lâ€™endpoint /repos/Owner/:repo. Si la
requÃªte est un succÃ¨s, alors nous devrions avoir 204 No Content (204 Aucun contenu) comme rÃ©ponse. Essayons avec Postman.

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342974078793_image28.png"
         alt="Suppression d'un repo" />
    <figcaption>Suppression d'un repo</figcaption>
</figure>

Tapez les informations nÃ©cessaires : votre username et le nom du repo que vous souhaitez supprimer. Pas besoin de body pour DELETE, cliquez sur
none. Puis cliquez sur Send et regardez la rÃ©ponse obtenue. ğŸ‘‡ğŸ¼

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/1634297546126_image61.png"
         alt="Le repo est supprimÃ© : status : 204 no content est encadrÃ© en vert." />
    <figcaption>Le repo est supprimÃ©</figcaption>
</figure>

Et voilÃ  ! Votre repository est supprimÃ© Ã  tout jamais ! ğŸ‰ Nous obtenons un body vide et un statut 204 No Content comme lâ€™a indiquÃ© la
documentation.

VÃ©rifiez sur GitHub que votre repo a bien Ã©tÃ© supprimÃ©. ğŸ‘‡ğŸ¼

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342977512888_image36.png"
         alt="VÃ©rification de la suppression" />
    <figcaption>VÃ©rification de la suppression</figcaption>
</figure>

Vous avez vu comment fonctionnent POST, PUT et DELETE et vous les avez vous-mÃªme utilisÃ©s avec lâ€™API GitHub et Postman. FÃ©licitations ! ğŸ‘

Vous les avez utilisÃ©s dans le contexte dâ€™un repo GitHub, mais vous pouvez utiliser ces verbes HTTP pour tout type de fonctionnalitÃ©, en
fonction de lâ€™API.
- Vous avez vu dans la documentation GitHub que lâ€™URI correct est le mÃªme que pour Update, mais avec un nouveau verbe HTTP :
DELETE /repos/:Owner/:repo.
- Vous avez vu que notre repo est supprimÃ© et ne se trouve plus dans notre UI GitHubâ€‰!

Voici comment faire en vidÃ©o :

<Vimeo vimeoId="467403766" />

<br />

### En rÃ©sumÃ©

- Vous pouvez utiliser POST pour **crÃ©er** des ressources.
- PUT ou PATCH vous permet de **mettre Ã  jour** des ressources.
- DELETE vous permet de **supprimer** des ressources !

_Dans la prochaine partie, nous allons Ã©tudier les meilleures pratiques lorsque vous concevez vous-mÃªme une API ! Mais avant, il est temps de
rÃ©viser ce que vous venez dâ€™apprendre avec le quiz de fin de partie !_

-----

## Quiz : Servez-vous des API REST pour vos projets de code

[Servez-vous des API REST pour vos projets de code - OpenClassrooms](https://openclassrooms.com/fr/courses/6573181-adoptez-les-api-rest-pour-vos-projets-web/exercises/4278)

#### CompÃ©tences Ã©valuÃ©es

<i class="bi bi-check2-circle"></i> Formuler des requÃªtes et envoyer des rÃ©ponses avec une API REST

-----

#### Question 1 : Vous recevez un code de rÃ©ponse HTTP 200. Quâ€™est-ce que cela signifieÂ ?

<i class="bi bi-record-circle"></i> La requÃªte a Ã©tÃ© un succÃ¨s<br />
<i class="bi bi-circle"></i> La requÃªte a Ã©tÃ© redirigÃ©e<br />
<i class="bi bi-circle"></i> Une erreur serveur<br />
<i class="bi bi-circle"></i> La ressource n'existe pas<br />
<br />

_RÃ©ponse 1._<br />
_Les codes de rÃ©ponses HTTP permettent de donner des indications au client sur le succÃ¨s ou non de la requÃªte._<br />
_200 signifie que la requÃªte a Ã©tÃ© un succÃ¨s, une erreur serveur se situe dans les 500, une ressource inexistante serait 404 et une redirection
se situe dans les 300._<br />
_Rappelez-vous :_
- _100+ â¡ Information_
- _200+ â¡ SuccÃ¨s_
- _300+ â¡ Redirection_
- _400+ â¡ Erreur client_
- _500+ â¡ Erreur serveur_

-----

#### Question 2 : Vous recevez un code de rÃ©ponse HTTP 404. Quâ€™est-ce que cela signifie ?

<i class="bi bi-circle"></i> La requÃªte a Ã©tÃ© un succÃ¨s<br />
<i class="bi bi-record-circle"></i> La ressource n'existe pas<br />
<i class="bi bi-circle"></i> La requÃªte a Ã©tÃ© redirigÃ©e<br />
<i class="bi bi-circle"></i> Une erreur serveur<br />
<br />

_RÃ©ponse 2._<br />
_Une ressource inexistante a pour code HTTPÂ : 404._<br />
_200 signifie que la requÃªte a Ã©tÃ© un succÃ¨s._<br />
_Une erreur serveur se situe dans les 500._<br />
_Une redirection serait 301._

-----

#### Question 3 : Quâ€™est-ce que le CRUD ?

<i class="bi bi-circle"></i> Le CRUD est un systÃ¨me qui permet aux dÃ©veloppeurs dâ€™obtenir un accÃ¨s privilÃ©giÃ© Ã  la base de donnÃ©es dâ€™une API
grÃ¢ce Ã  un token.<br />
<i class="bi bi-record-circle"></i> CRUD est un acronyme que les dÃ©veloppeurs utilisent pour parler des rÃ¨gles dâ€™architecture dâ€™une API, et
chaque lettre reprÃ©sente une rÃ¨gle.<br />
<i class="bi bi-circle"></i> Le CRUD est une liste dâ€™actions qui permettent Ã  lâ€™utilisateur de savoir d'oÃ¹ vient la donnÃ©e quâ€™il demande, et
qui contient des rÃ¨gles spÃ©cifiques sur le design de lâ€™API et la reprÃ©sentation des ressources.<br />
<i class="bi bi-circle"></i> Le CRUD est une liste dâ€™actions que peut effectuer lâ€™utilisateur avec une API REST. Câ€™est un acronyme, pour
lequel chaque lettre reprÃ©sente une action sous forme dâ€™un verbe HTTP.<br />
<br />

_RÃ©ponse 2._<br />
_Le CRUD est la liste des actions de base que vous pouvez effectuer sur une ressource. Câ€™est lâ€™acronyme de **C**reate, **R**ead, **U**pdate
et **D**elete._

-----

#### Question 4 : Quels sont les 4 verbes HTTP et leur action CRUD correspondante ?

<i class="bi bi-circle"></i>

- GET â€“ Create
- PUT â€“ Update
- POST â€“ Read
- DELETE â€“ Destroy

<i class="bi bi-circle"></i>

- GET â€“ Update
- PUT â€“ Read
- POST â€“ Create
- DELETE â€“ Delete

<i class="bi bi-record-circle"></i>

- GET â€“ Read
- PUT â€“ Update
- POST â€“ Create
- DELETE â€“ Delete

<i class="bi bi-circle"></i>

- GET â€“ Read
- PUT â€“ Edit
- POST â€“ Update
- DELETE â€“ Destroy

_RÃ©ponse 3._<br />
_Les quatre verbes HTTP et leur action CRUD sontÂ :_
- _GET â€“ Read,_
- _PUT â€“ Update,_
- _POST â€“ Create,_
- _DELETE â€“ Delete._

_GET permet dâ€™obtenir des ressources._<br />
_PUT permet de mettre Ã  jour une ressource._<br />
_POST permet de crÃ©er une nouvelle ressource._<br />
_DELETE permet de supprimer une ressource._<br />

-----

#### Question 5 : Pour rÃ©pondre aux questions 5 Ã  9, rendez-vous sur la documentation en angais de lâ€™API [Star Wars](https://swapi.dev/). Vous pourrez effectuer les requÃªtes via le site Internet SWAPI ou via Postman, Ã  votre convenance. Nous vous conseillons dâ€™utiliser Postman pour vous familiariser avec ce logiciel.**

**Avant de rÃ©pondre aux questions, nous vous conseillons de lire attentivement la [documentation](https://swapi.dev/documentation), puis
rendez-vous sur lâ€™onglet Authentication.**

**AprÃ¨s lecture, que pouvez-vous observer sur lâ€™API ?**

<i class="bi bi-record-circle"></i> Lâ€™API est publique.<br />
<i class="bi bi-circle"></i> Lâ€™API est privÃ©e.<br />
<i class="bi bi-circle"></i> Lâ€™API est en partie publique mais nÃ©cessite une authentification avec token pour certains endpoints.<br />
<i class="bi bi-circle"></i> Lâ€™API nâ€™est pas disponible.<br />
<br />

_On note cette mention : â€œSwapi is a completely open API. No authentication is requiredâ€._<br />
_Cela signifie que lâ€™API est publique, et quâ€™elle ne nÃ©cessite pas dâ€™authentification pour accÃ©der aux donnÃ©es._<br />
_Si lâ€™API Ã©tait privÃ©e, nous nâ€™aurions pas pu y avoir accÃ¨s._<br />

-----

#### Question 6 : En vous aidant de la documentation, effectuez une requÃªte GET sur Postman avec lâ€™URI suivanteÂ : /people/obi-wan. Quâ€™observez-vousÂ ?

<i class="bi bi-circle"></i> Vous obtenez les dÃ©tails et informations sur le personnage Obi-Wan Kenobi.<br />
<i class="bi bi-record-circle"></i> La ressource nâ€™existe pas, et lâ€™API me retourne une erreur 404.<br />
<i class="bi bi-circle"></i> Le serveur retourne une erreur 500.<br />
<br />

_RÃ©ponse 2._<br />

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342990355835_image1.png"
         alt="" />
    <figcaption></figcaption>
</figure>

_Cet endpoint nâ€™existe pas. La documentation de lâ€™API nous explique que pour rÃ©cupÃ©rer les informations de la ressource People, on utilise un
:id._<br />
_Il nous aurait fallu effectuer une requÃªte sur lâ€™endpoint suivantÂ : https://swapi.dev/api/people/10, pour obtenir les informations dâ€™Obi-Wan
Kenobi._

-----

#### Question 7 : Notre prochaine Ã©tape est de rÃ©cupÃ©rer les informations du personnage Obi-Wan Kenobi.

**Avec lâ€™aide de la documentation, effectuez une requÃªte qui vous permet de rÃ©cupÃ©rer la liste de TOUS les personnages.**

**Trouvez Obi-Wan Kenobi parmi les rÃ©sultats, en vous aidant de la documentation et du body de rÃ©ponse.**

**Quel endpoint permettrait dâ€™obtenir des informations sur Obi-Wan KenobiÂ ?**

<i class="bi bi-circle"></i> https://swapi.dev/api/people/3/<br />
<i class="bi bi-circle"></i> https://swapi.dev/api/people/obi-wan/<br />
<i class="bi bi-circle"></i> https://swapi.dev/api/character/10/<br />
<i class="bi bi-record-circle"></i> https://swapi.dev/api/people/10/<br />
<br />

_RÃ©ponse 4._

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342994219276_image21.png"
         alt="Screenshot affichant le rÃ©sultat de la requÃªte." />
    <figcaption></figcaption>
</figure>

_La rÃ©ponse 1 nous retourne le personnage de R2-D2._<br />

_Les rÃ©ponses 2 et 3 retournent un code erreur 404 NOT FOUND._

-----

#### Question 8 : En vous aidant de la documentation et en vous basant sur la rÃ©ponse prÃ©cÃ©denteÂ : quelle URI correspond Ã  sa planÃ¨te nataleÂ ?

<i class="bi bi-record-circle"></i> /planets/20<br />
<i class="bi bi-circle"></i> /planet/20/homeland<br />
<i class="bi bi-circle"></i> /planets/20/homeland<br />
<i class="bi bi-circle"></i> /planet/20<br />
<br />

_Il sâ€™agit de_ /planets/20.<br />
_La rÃ©ponse prÃ©cÃ©dente Ã©tait : [https://swapi.dev/api/people/10/](https://swapi.dev/api/people/10/)._<br />
_La [documentation](https://swapi.dev/documentation#people) de la ressource People nous indique que lâ€™attribut homeworld retourne lâ€™URL dâ€™une
ressource **Planet** sur laquelle la personne est nÃ©e ou a habitÃ©._<br />
_En nous basant sur le body de rÃ©ponse, on note que lâ€™URL est [https://swapi.dev/api/planets/20](https://swapi.dev/api/planets/20) â€“ de ce
fait lâ€™URI sera /planets/20._<br />
_Les rÃ©ponses 2, 3 et 4 nous retournent un code dâ€™erreur HTTP 404 NOT FOUND car ces routes n'existent pas. Aucune ressource nâ€™y est accessible._

-----

#### Question 9 : Faites une requÃªte GET avec la rÃ©ponse prÃ©cÃ©dente. Votre mission est de rÃ©cupÃ©rer les informations de sa planÃ¨te natale et notamment lâ€™attribut _climate_.

**Quel est lâ€™attribut climate de sa planÃ¨te natale ?**

<i class="bi bi-record-circle"></i> temperate<br />
<i class="bi bi-circle"></i> frozen<br />
<i class="bi bi-circle"></i> arid<br />
<br />

_Il sâ€™agit de lâ€™attribut climate â€œtemperateâ€._

<figure>
    <img src="https://user.oc-static.com/upload/2021/10/15/16342996596175_image13.png"
         alt="Screenshot affichant l'attribut climate 'temperate'" />
    <figcaption></figcaption>
</figure>

_Il vous faut faire une requÃªte avec lâ€™endpoint suivantÂ : [https://swapi.dev/api/planets/20](https://swapi.dev/api/planets/20)._<br />
_Le body nous retourne les informations de la planÃ¨te natale de KenobiÂ : Stewjon. Lâ€™attribut climate a pour valeur temperate._
