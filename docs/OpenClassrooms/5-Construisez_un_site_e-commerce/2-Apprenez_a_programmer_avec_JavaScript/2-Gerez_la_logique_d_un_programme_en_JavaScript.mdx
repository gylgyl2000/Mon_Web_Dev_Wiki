---
id: 2-Gerez_la_logique_d_un_programme_en_JavaScript
title: Gérez la logique d'un programme en JavaScript
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import { Vimeo, CodePen } from 'mdx-embed';


# Gérez la logique d'un programme en JavaScript

## Exécutez du JavaScript facilement

[Exécutez du JavaScript facilement - Apprenez à programmer avec JavaScript - OpenClassrooms](https://openclassrooms.com/fr/courses/6175841-apprenez-a-programmer-avec-javascript/6278709-executez-du-javascript-facilement)

<Vimeo vimeoId="528290343" />

<br />

### Découvrez l'avantage de JavaScript : un langage, de nombreux environnements

L'avantage du JavaScript, c'est que ce langage vous permet de programmer dans de nombreux environnements différents. Gardez cependant en tête
que la façon d'exécuter le code est légèrement différente dans chaque environnement. Nous allons ici explorer brièvement trois environnements
différents : JSBin, les pages web et les serveurs.

### Découvrez JSBin

JSBin est un excellent outil pour tester des extraits de code en JavaScript : c'est pour cette raison que je l'ai utilisé pour démontrer
certains outils ou principes. Voyons comment il exécute le code.

Dans JSBin, vous pouvez écrire du code ligne par ligne dans le volet JavaScript, et utiliser le bouton Run pour l'exécuter. JSBin parcourt
alors vos lignes de code et les exécute l'une après l'autre. L'ordre est donc important.

Par exemple, ce morceau de code :

```javascript
let numberOfGuests = 20;
console.log(numberOfGuests); // 20
```

... n'est pas identique à :

```javascript
console.log(numberOfGuests); // undefined
let numberOfGuests = 20;
```

### Écrivez du code pour des pages web

Si vous avez suivi les exercices jusqu'ici, vous avez écrit du code JavaScript pour une page web. Mais vous n'avez pas encore vu comment votre
code est interprété en arrière-plan !

:::note ?
Dans les exercices des chapitres précédents, j'ai ajouté du code à un fichier JavaScript. Mais comment ce code a-t-il été ensuite _exécuté_
dans le navigateur intégré ?
:::

Eh bien, il y avait d'autres fichiers (auxquels vous n'aviez pas accès) qui effectuaient ce travail pour vous.  En effet, il y avait un autre
fichier JavaScript qui importait votre tableau d'épisodes et produisait les éléments qu'il ajoutait ensuite à la page web. Ce fichier était
ensuite importé par le fichier HTML (qui indique au navigateur ce qu'il devrait y avoir sur la page), et exécutait automatiquement le code.

<figure>
    <img src="https://user.oc-static.com/upload/2021/03/29/16170216463468_P2C1_javascript.png" alt="Capture d'écran d'un terminal de commande" />
    <figcaption>Légende : chargement d’un fichier javascript dans un fichier html</figcaption>
</figure>

C'est plus ou moins de cette façon que JavaScript fonctionne sur le web. Vous écrivez du code, l'enregistrez dans un ou plusieurs fichiers,
puis **importez** ces fichiers par une balise spéciale dans votre fichier HTML. Le navigateur **exécute** ensuite automatiquement le code dans
ces fichiers, en général dans l'ordre de leur importation.

:::info
Il existe un cours complet sur JavaScript pour le web, donc quand vous aurez fini celui-là, pourquoi ne pas y jeter un œil ?

[**Écrivez du JavaScript pour le web**](https://openclassrooms.com/fr/courses/5543061-ecrivez-du-javascript-pour-le-web)
:::

### Écrivez du JavaScript pour des serveurs

Il fut un temps où JavaScript ne pouvait s'utiliser que dans des pages web (en avant-plan), mais ce n'est plus vrai ! Il peut maintenant aussi
s'utiliser en **arrière-plan**, pour gérer l'accès à certaines ressources.

Prenez par exemple un service de messagerie mail. Vous avez une page web qui vous permet d'accéder à vos messages, mais ils ne sont pas
**enregistrés** dans cette page. Ils sont enregistrés dans une base de données, et la page que vous utilisez accède à cette base de données à
travers un serveur, qui peut être écrit en JavaScript !

Néanmoins, les serveurs doivent être actifs à tout moment, et seuls certains éléments de code doivent être exécutés à certains moments. Par
exemple, le code qui vous permet d'accéder à vos messages ne doit être exécuté **que** si et quand vous décidez d'ouvrir votre client de
messagerie !

Dans ce cas, un environnement (tel que **Node**), couplé à un code JavaScript particulier, fait que cela se produit. Le serveur **réagit** à
votre ouverture du client de messagerie, **vérifie** l'authentification et **envoie** vos messages.

### En résumé

Dans ce chapitre, vous avez :
- appris à utiliser JSBin ;
- appris à créer du JavaScript pour des pages web ;
- découvert que le JavaScript peut aussi s'utiliser pour des serveurs.

_Dans le chapitre suivant, nous allons nous intéresser aux_ **_instructions conditionnelles_**_, et à la façon de contrôler le déroulement d'un
programme._

-----

## Choisissez la condition appropriée pour contrôler le déroulement de votre programme (if, else, switch)

[Choisissez la condition appropriée pour contrôler le déroulement de votre programme (if, else, switch) - Apprenez à programmer avec JavaScript - OpenClassrooms](https://openclassrooms.com/fr/courses/6175841-apprenez-a-programmer-avec-javascript/6278948-choisissez-la-condition-appropriee-pour-controler-le-deroulement-de-votre-programme-if-else-switch)

<Vimeo vimeoId="528290407" />

<br />

Comme vous allez écrire des programmes de plus en plus évolués, la création de lignes de code qui s'exécutent l'une après l'autre dans un ordre
défini ne suffira plus. C'est là que vient la notion de **déroulement du programme**.

Le déroulement du programme est un terme général qui décrit l'**ordre** dans lequel s'exécutent vos lignes de code. Cela signifie que certaines
lignes seront lues une seule fois, certaines plusieurs fois, et d'autres complètement ignorées, selon la situation.

Dans ce premier chapitre sur le déroulement du programme, nous allons nous intéresser aux **instructions conditionnelles**.

### Appréhendez les instructions if/else

L'instruction `if`/`else` est une des plus universelles en programmation. Qu'il s'agisse de réagir à une saisie de l'utilisateur, aux résultats
de calculs ou de simplement vérifier si quelqu'un est connecté ou non, vous aurez souvent à utiliser des instructions if/else.

`IF (SI) l'utilisateur est connecté, ouvrir sa page d'accueil)`

`ELSE (SINON) revenir à la page de connexion)`

C'est ce qu'on appelle une **_instruction conditionnelle_**, parce qu'elle vérifie si certaines conditions sont réunies, et réagit en
conséquence. Voyons les types de conditions qui peuvent être utilisés dans ces instructions.

#### Utilisez des valeurs `boolean`

En JavaScript, si on utilise des `boolean` (_bouléens_, en français) simples pour les instructions `if`/`else`, la syntaxe se présente comme
suit :

```javascript
if (myBoolean) {
// réaction à la valeur vraie de myBoolean
} else {
// réaction à la valeur faux de myBoolean
}
```

Donc, pour vérifier si un utilisateur est connecté, vous pouvez procéder comme suit :

```javascript
let UserLoggedIn = true;
if (UserLoggedIn) {
    console.log("Utilisateur connecté!");
} else {
    console.log("Alerte, intrus!");
}
```

Dans le cas ci-dessus, vous obtiendrez l'impression sur la console de `"Utilisateur connecté!"`, car le boolean `userLoggedIn` a la valeur true.
S'il avait la valeur false, vous obtiendriez à la place `"Alerte, intrus!"`.

#### Utilisez des expressions

Plutôt qu'une simple variable logique dans une condition `if`/`else`, vous pouvez aussi utiliser des **expressions de comparaison**, qui
comparent des valeurs entre elles.

Les expressions de comparaison vous permettent de comparer deux valeurs par les opérateurs suivants :
- `<` inférieur à ;
- `<=` inférieur ou égal à ;
- `==` égal à ;
- `>=` supérieur ou égal à ;
- `>` supérieur à ;
- `!=` différent de.

Par exemple :

```javascript
const numberOfSeats = 30;
const numberOfGuests = 25;
if (numberOfGuests < numberOfSeats) {
    // autoriser plus d'invités
} else {
    // ne pas autoriser de nouveaux invités
}
```

Vous pouvez aussi **chaîner** les instructions `if`/`else` pour réagir à des conditions potentielles multiples :

```javascript
if (numberOfGuests == numberOfSeats) {
    // tous les sièges sont occupés
} else if (numberOfGuests < numberOfSeats) {
    // autoriser plus d'invités
} else {
// ne pas autoriser de nouveaux invités
}
```

Le chaînage d'instructions permet de prévoir différents résultats en fonction des différentes situations.

#### Pratiquez les conditions if/else

![](https://user.oc-static.com/upload/2021/03/24/16165901356926_A-vous-de-jouer.png)

Voici une occasion de vous entraîner à l'utilisation des instructions if/else.

Rendez-vous sur cet [éditeur CodePen](https://codepen.io/quentin-laurent/pen/GRNwLOJ). Dans cet exercice, nous allons mettre en place un
contrôle de l'âge pour afficher un contenu. Sur notre page, il y a un input text qui demande de saisir votre âge, et un bouton pour valider.
Si on est majeur, donc 18 ans et plus, on affiche le message autorisé, sinon on affiche une alerte disant que l’on n’est pas autorisé.

Pour réaliser cet exercice, voici comment vous allez procéder :
1. Vous allez lire le code JavaScript, qui est intégralement commenté, pour bien comprendre à quoi sert chaque élément, et surtout les variables
à votre disposition. Il y a sûrement des éléments que vous ne comprenez pas car vous n’avez pas encore vu comment manipuler du HTML en
JavaScript, mais ici vous n’avez qu’à exploiter les variables et fonctions déjà codées.
2. Vous allez écrire une condition if/else entre les lignes 34 et 38 qui appellera la fonction refuser() si l'âge saisi correspond à un mineur,
et la fonction valider() s’il est majeur.
3. Attention, l'âge de la majorité a été stocké dans la variable ageMajorite, donc il faut utiliser cette variable dans la condition.

Une fois que vous aurez codé la bonne condition, vous pourrez enchaîner les tests en saisissant différents âges et en validant.

<CodePen codePenId="GRNwLOJ" />

##### Solution

[Voici un nouveau CodePen avec une solution](https://codepen.io/quentin-laurent/pen/ExNdMQb) à l’exercice.

<CodePen codePenId="ExNdMQb" />

### Découvrez l'égalité : == ou ===

En JavaScript, toutes les égalités ne sont pas nées égales :

Il y a deux façons de vérifier si deux valeurs sont égales en JavaScript :  ==  et  ===, aussi appelées _égalité_ **_simple_** et _égalité_
**_stricte_** :
- l'égalité simple vérifie la **valeur**, mais pas le type. Donc ceci renvoie la valeur `true` : `5 == "5"`
- par contre, l'égalité stricte vérifie à la fois la **valeur et le type**. Donc : `5 === "5"` renvoie `false`, car on compare un `number` à
une `string`.

De même, il y a deux opérateurs d'inégalité, `!=` et `!==`, avec la même distinction.

##### Comprenez les conditions multiples

Dans certaines situations, vous souhaitez vérifier plusieurs conditions pour un même résultat ; par exemple dans la même instruction if. Pour
cela, il existe des **opérateurs logiques** :
- `&&` – ET logique – pour vérifier si deux conditions sont **toutes les deux** vraies ;
- `||` – OU logique – pour vérifier si **au moins une** condition est vraie ;
- `!` – NON logique – pour vérifier si une condition n'est **pas** vraie.

```javascript
let userLoggedIn = true;
let hasUserPremiumAccount = true;
let userHasMegaPremiumAccount = false;
userLoggedIn && userHasPremiumAccount; // true
userLoggedIn && userHasMegaPremiumAccount; // false
userLoggedIn || userHasPremiumAccount; // true
userLoggedIn || userHasMegaPremiumAccount; // true
!userLoggedIn; // false
!userHasMegaPremiumAccount; // true
```

Bien sûr, ces opérateurs peuvent être mélangés et combinés en fonction de vos besoins précis.

#### Pratiquez les opérateurs logiques

![16165901356926_A-vous-de-jouer.png](https://user.oc-static.com/upload/2021/03/24/16165901356926_A-vous-de-jouer.png)

Rendez-vous sur cet [éditeur CodePen](https://codepen.io/quentin-laurent/pen/poNQNdY) pour vous entraîner.

Nous reprenons l’exercice précédent avec une checkbox servant à indiquer si le contrôle parental est activé ou non. On se retrouve avec 2
situations :
- Le contrôle parental est activé et il faut être majeur pour accéder au contenu.
- Le contrôle parental est désactivé et tout le monde accède au contenu.

Il y a donc une notion de contrôle parental qui se retrouve dans une nouvelle variable dans le code.

Votre mission est donc d’écrire la condition de la même manière que l’exercice précédent au niveau des lignes 40 à 42, en prenant en compte la
nouvelle variable `isControlParentalActive`.

Avant de commencer à coder votre solution, n’hésitez pas à regarder comment la variable `isControlParentalActive` est obtenue. Mais si vous ne
comprenez pas, ce n’est pas grave, l’objectif ici est avant tout d’exploiter sa valeur dans une condition.

<CodePen codePenId="poNQNdY" />

##### Solution

Vous avez terminé ? [Voici un nouveau CodePen avec une solution](https://codepen.io/quentin-laurent/pen/eYBQoMr) à l’exercice.

<CodePen codePenId="eYBQoMr" />

### Appréhendez une notion importante : le scope des variables

En JavaScript, les variables créées par `let` ou `const` ne peuvent être vues ou utilisées qu'à **l'intérieur** du bloc de code dans lequel
elles sont déclarées.

:::caution !
Vous rencontrerez certainement le mot clé `var` pour la création de variables au cours de votre carrière de développeur. Les variables déclarées
ainsi n'ont pas un scope de bloc mais un scope de **fonction** ; donc elles n'ont pas tout à fait le même comportement que celles que je décris
dans ce cours. Pour plus d'informations, je vous conseille cet article (en anglais) :

[**https://www.geeksforgeeks.org/difference-between-var-and-let-in-javascript/**](https://www.geeksforgeeks.org/difference-between-var-and-let-in-javascript/)
:::

:::info
Un **bloc de code**, aussi souvent appelé _**bloc**_ tout court, est une section de code incluse entre accolades {}.
:::

Ce phénomène est appelé **_portée des variables_** ou **_block scope_** _(en anglais)_.  Voici un exemple :

```javascript
let userLoggedIn = true;
if (userLoggedIn) {
    let welcomeMessage = 'Welcome back!';
} else {
    let welcomeMessage = 'Welcome new user!';
}
console.log(welcomeMessage); // renvoie une erreur
```

Dans ce code, nous avons deux blocs de code issus de l'instruction `if`/`else`. Ils sont mis en évidence dans l'image ci-dessous :

<figure>
    <img src="https://user.oc-static.com/upload/2021/03/24/16165593043888_image5.png" alt="Scopes surlignés" />
    <figcaption>Scopes surlignés</figcaption>
</figure>

Les deux blocs orange et rose déclarent une variable par `let welcomeMessage`. Néanmoins, ces variables ne sont disponibles qu'à
**l'intérieur** des blocs où elles sont déclarées. C'est pourquoi, quand vous essayez d'afficher le contenu de `welcomeMessage` sur la console,
vous obtenez une erreur : pour le code **en dehors** des blocs (aussi appelé _portée extérieure_ ou _parente_), il n'y a pas de variable
`welcomeMessage` !

:::note ?
Donc, comment obtenir le comportement voulu ? Comment passer des valeurs vers l'extérieur depuis l'intérieur d'un bloc de code ?
:::

Pour cette situation, une méthode pourrait être de déclarer la variable dans la portée **extérieure**, puis de la modifier à l'intérieur des
blocs `if`/`else` :

```javascript
let userLoggedIn = true;
let welcomeMessage = ''; // déclarer la variable ici
if (userLoggedIn) {
    welcomeMessage = 'Welcome back!'; // modifier la variable extérieure
} else {
    welcomeMessage = 'Welcome new user!'; // modifier la variable extérieure
}
console.log(welcomeMessage); // imprime 'Welcome back!'
```

Ici, du fait que la variable soit déclarée dans le scope parent, elle est disponible et accessible partout, et peut être modifiée correctement.

### Utilisez les instructions switch

Et si vous souhaitez vérifier la valeur d'une variable par rapport à une liste de valeurs attendues, et réagir en conséquence ? Pour cela, vous
pouvez utiliser l'instruction `switch` :

Supposons que vous ayez quelques objets utilisateurs. Vous souhaitez vérifier quel type de compte a chacun, pour envoyer un message personnalisé :

```javascript
let firstUser = {
    name: "Will Alexander",
    age: 33,
    accountLevel: "normal"
};
let secondUser = {
    name: "Sarah Kate",
    age: 21,
    accountLevel: "premium"
};
let thirdUser = {
    name: "Audrey Simon",
    age: 27,
    accountLevel: "mega-premium"
};
```

Vous pouvez ici utiliser une instruction `switch`, qui prend la variable à vérifier et une liste de valeurs, comme différents cas :

```javascript
switch (firstUser.accountLevel) {
    case 'normal':
        console.log('You have a normal account!');
    break;
    case 'premium':
        console.log('You have a premium account!');
    break;
    case 'mega-premium':
        console.log('You have a mega premium account!');
    break;
    default:
    console.log('Unknown account type!');
}
```

Après le code à exécuter dans chaque instruction `case`, ajoutez l'instruction `break`. Si vous ne le faites pas, JavaScript continuera
l'exécution des cas suivants (**en cascade**) jusqu'à rencontrer une instruction `break` ou la fin de l'instruction `switch`. Comme vous pouvez
le voir dans l'exemple, vous pouvez aussi ajouter un cas `default` qui ne sera exécuté que si la variable que vous vérifiez ne correspond à
aucune des valeurs répertoriées.

Le switch peut servir dans différents cas mais surtout **rendre plus facile à lire** l'enchaînement de condition if/else.

Par exemple voici comment on aurait écrit l’exemple précédent avec des if/else :

```javascript
if (firstUser.accountLevel === 'normal' ) {
    console.log('You have a normal account!');
} else if (firstUser.accountLevel === 'premium' ) {
    console.log('You have a premium account!');
} else if (firstUser.accountLevel === 'mega-premium' ) {
    console.log('You have a mega premium account!');
} else {
    console.log('Unknown account type!');
}
```

Comme vous pouvez le voir, les instructions `switch` utilisent aussi des accolades. C'est un autre exemple de bloc de code, donc les variables
éventuellement déclarées à l'intérieur d'une instruction `switch` ne seront pas disponibles pour le code environnant !

### En résumé

Félicitations pour l'achèvement de ce chapitre ! Nous avons traité beaucoup de choses ici. Vous avez :
- appris le fonctionnement des instructions `if`/`else` ;
- vu les différents types de conditions pouvant être utilisés pour les instructions if/else ;
- appris à regrouper les différentes conditions avec des opérateurs logiques ;
- exploré la portée des variables, et les conséquences qu'elle a sur la structure du code ;
- découvert l'instruction `switch` pour comparaison à une liste de valeurs attendues.

_Dans le chapitre suivant, nous allons nous intéresser à la répétition de tâches avec des_ **_boucles._**

-----

## Utilisez la bonne boucle pour répéter les tâches (for, while)

[Utilisez la bonne boucle pour répéter les tâches (for, while) - Apprenez à programmer avec JavaScript - OpenClassrooms](https://openclassrooms.com/fr/courses/6175841-apprenez-a-programmer-avec-javascript/6279104-utilisez-la-bonne-boucle-pour-repeter-les-taches-for-while)

<Vimeo vimeoId="528290517" />

<br />

En programmation, il y a des ensembles d'instructions à répéter plusieurs fois. Parfois, vous connaîtrez à l'avance le nombre de répétitions,
d'autres fois non. Il est aussi possible que le nombre de fois n'importe pas, et que vous souhaitiez répéter le code jusqu'à atteindre une
certaine condition. Pour tous ces cas, nous utiliserons des **boucles**.

### Utilisez la boucle for pour savoir "combien de fois ?"

Supposons que vous ayez à faire embarquer 10 passagers, et que pour l'instant vous n'accordiez pas d'importance à l'ordre de leur embarquement.
Utilisez une boucle `for` pour les embarquer un par un jusqu'à atteindre 10 :

```javascript
const numberOfPassengers = 10;
for (let i = 0; i < numberOfPassengers; i++) {
    console.log("Passager embarqué !");
}
```

Pour cette boucle `for`, créez une variable d'indice `i` qui sert de compteur pour le nombre d'exécutions de la boucle. C'est pour cette raison
qu'elle démarrera à zéro, car on n'a pas encore parcouru la boucle.

La deuxième commande dans les parenthèses `for` est la condition de poursuite de la boucle : dès qu'elle s'évalue comme `false`, on quitte la
boucle. Dans ce cas, vous souhaitez l'exécuter autant de fois qu'il y a de passagers, donc quand l'indice `i` atteint 10 (après 10 boucles),
vous souhaitez l'arrêter, car il n'y a plus de passager.

<figure>
    <img src="https://user.oc-static.com/upload/2021/03/29/16170342117078_P2C3_programmation.png"
         alt="Schéma récapitulatif du paragraphe précédent sur la boucle For" />
    <figcaption>Le principe de la boucle For</figcaption>
</figure>

La troisième commande demande à la boucle `for` d'incrémenter `i` (ajouter 1) à chaque exécution. C'est ce qui permet de suivre le nombre
d'exécutions de la boucle.

JavaScript termine la boucle avant d'exécuter tout autre code, donc si vous deviez écrire ceci :

```javascript
const numberOfPassengers = 10;
for (let i = 0; i < numberOfPassengers; i++) {
    console.log("Passager embarqué !");
}
console.log("Tous les passagers sont embarqués !");
```

... la dernière sortie de console s'imprimerait _après_ l'embarquement des 10 passagers.

Le travail sur des indices, c'est bien, mais si vous souhaitiez utiliser un tableau de passagers pour les embarquer dans un ordre précis ?

### Travaillez sur des tableaux : `for… of` et `for… in`

Dans beaucoup de cas, vous aurez un tableau et devrez le parcourir, pour faire quelque chose sur chaque élément. Il peut s'agir de mettre à jour
les prix sur un menu, de traiter les données d'une base de données, ou d'embarquer des passagers dans l'ordre.

L'ancienne façon de parcourir un tableau dans une boucle était d'utiliser la boucle `for` vue précédemment avec sa propriété `length`. Par
exemple, avec un tableau appelé `passengers` :

```javascript
for (let i = 0; i < passengers.length; i++) {
    console.log("Passager embarqué !");
}
```

Bien que ceci fonctionne, il y a deux façons plus faciles de parcourir en boucle des tableaux (ou de faire une itération sur leurs éléments).

#### La boucle `for… in`

La boucle `for… in` est très comparable à l'exemple de boucle `for` normale, mais elle est plus facile à lire, et effectue tout le travail
d'itération pour vous :

```javascript
const passengers = [
    "Will Alexander",
    "Sarah Kate'",
    "Audrey Simon",
    "Tao Perkington"
]
for (let i in passengers) {
    console.log("Embarquement du passager " + passengers[i]);
}
```

Comme dans l'exemple précédent, `i` démarre automatiquement à zéro, et s'incrémente à chaque boucle. Vous imprimez donc `passengers[0]`, puis
`passengers[1]`, puis `passengers[2]`, etc., jusqu'à terminer l'itération sur tous les passagers. Vous pouvez bien sûr imprimer chaque élément
sur la console, car chacun est une chaîne contenant le nom du passager.

#### La boucle `for… of`

Pour les cas où l'indice précis d'un élément n'est pas nécessaire pendant l'itération, vous pouvez utiliser une boucle `for… of` :

En reprenant l'exemple précédent et en utilisant à la place une boucle `for… of`, vous obtenez :

```javascript
const passengers = [
    "Will Alexander",
    "Sarah Kate",
    "Audrey Simon",
    "Tao Perkington"
]
for (let passenger of passengers) {
    console.log("Embarquement du passager " + passenger);
}
```

Ceci produit exactement le même résultat, mais de façon plus lisible, car vous n'avez pas à vous inquiéter des indices et des tableaux : vous
recevez simplement chaque élément dans l'ordre. C'est encore plus utile si le tableau est un peu plus complexe et contient par exemple des
objets :

```javascript
const passengers = [
    {
        name: "Will Alexander",
        ticketNumber: 209542
    },
    {
        name: "Sarah Kate",
        ticketNumber: 169336
    },
    {
        name: "Audrey Simon",
        ticketNumber: 779042
    },
    {
        name: "Tao Perkington",
        ticketNumber: 703911
    }
]
for (let passenger of passengers) {
    console.log('Embarquement du passager ' + passenger.name + ' avec le ticket numéro ' + passenger.ticketNumber);
}
```

#### Pratiquez les boucles `for`

![16165901356926_A-vous-de-jouer.png](https://user.oc-static.com/upload/2021/03/24/16165901356926_A-vous-de-jouer.png)

Voici un entraînement qui utilise des tableaux et des boucles `for`.

Rendez-vous sur cet [éditeur CodePen](https://codepen.io/nicolaspatschkowski/pen/ZEGRGpG). Le composant épisode a été restructuré, et les
épisodes sont maintenant importés depuis une base de données.

Maintenant, vous devez implémenter du code qui remettra à zéro l'information de visionnage pour tous les épisodes. Vous allez accomplir cette
tâche en itérant le tableau `episodes` en assignant la valeur false à la propriété `hasBeenWatched` de chaque épisode.

Le tableau `episodes` a déjà été déclaré pour vous.
1. Itérez le tableau `episodes` et assignez la valeur false à la propriété `hasBeenWatched` de chaque épisode, en utilisant une boucle for,
for… in ou for… of.
2. Maintenant, faites en sorte que tous les épisodes soient considérés comme ayant été vus. Cela fonctionne-t-il également ?

N'oubliez pas, votre code ira entre les commentaires "===" sur l'exercice.

<CodePen codePenId="ZEGRGpG" />

##### Solution

[Voici un nouveau CodePen avec une solution](https://codepen.io/nicolaspatschkowski/pen/dyorvOv) à l’exercice.

<CodePen codePenId="dyorvOv" />

Ces types de boucles fonctionnent très bien pour un nombre fixe d'itérations. Mais vous ne pouvez pas toujours savoir combien de fois une
boucle doit être exécutée.

### Utilisez la boucle `while` 

Une boucle `while` vérifie si une condition est vraie. Si c'est le cas, la boucle se poursuit ; sinon elle s'arrête. En revenant à l'exemple
de l'embarquement d'avion : supposons que vous ayez des variables représentant le nombre de sièges restants et le nombre de passagers restants.
Vous souhaitez continuer l'embarquement jusqu'à l'épuisement du nombre de sièges ou de passagers :

```javascript
let seatsLeft = 10;
let passengersStillToBoard = 8;
let passengersBoarded = 0;
while (seatsLeft > 0 && passengersStillToBoard > 0) {
    passengersBoarded++; // un passager embarque
    passengersStillToBoard--; // donc il y a un passager de moins à embarquer
    seatsLeft--; // et un siège de moins
}
console.log(passengersBoarded); // imprime 8, car il y a 8 passagers pour 10 sièges
```

Cette boucle `while` poursuit son exécution jusqu'à ce que l'un des nombres `seatsLeft` et `passengersStillToBoard` atteigne zéro, et à ce
point elle se termine.

### En résumé

Dans ce chapitre, vous avez abordé deux façons de répéter les tâches :
- la boucle `for`, pour un nombre d'itérations fixe ;
- la boucle `while`, quand le nombre d'itérations nécessaires est inconnu.

_Dans le chapitre suivant, nous allons nous intéresser à ce qu'on peut faire quand les choses ne se passent pas comme prévu._

-----

## Gérez des erreurs et des exceptions dans votre programme

[Gérez des erreurs et des exceptions dans votre programme - Apprenez à programmer avec JavaScript - OpenClassrooms](https://openclassrooms.com/fr/courses/6175841-apprenez-a-programmer-avec-javascript/6279176-gerez-des-erreurs-et-des-exceptions-dans-votre-programme)

<Vimeo vimeoId="528290624" />

<br />

Ne pas faire d'erreur lorsque l'on code est pratiquement impossible. Dans ce chapitre, vous allez découvrir les différents types d'erreur.

### Découvrez trois types d'erreur

En JavaScript, comme dans beaucoup d'autres langages de programmation, on distingue généralement trois types d'erreur.

<figure>
    <img src="https://user.oc-static.com/upload/2021/03/24/16165750121307_image2.jpg"
         alt="Photo avec différentes data sur un écran" />
    <figcaption>Du code avec une erreur</figcaption>
</figure>

#### Appréhendez les erreurs de syntaxe

Les erreurs de **syntaxe** (ou _erreurs d'_**_analyse_**) surviennent quand vous avez fait une faute d'écriture dans votre code. Il peut s'agir
de l'oubli ou de l'ajout d'un crochet ou d'une accolade, d'une faute d'orthographe sur un mot clé, _else_ ou _switch_, par exemple. Elles sont
généralement assez faciles à corriger (même si vous pouvez passer beaucoup de temps à retrouver les parenthèses manquantes !), et beaucoup
d'éditeurs de texte ou d'environnements de développement intégrés mettent automatiquement en évidence les erreurs de syntaxe.

:::info
Un environnement de développement intégré ou **_IDE_** (**I**ntegrated **D**evelopment **E**nvironment) est un logiciel fournissant un ensemble
d'outils aux développeurs. Il est généralement spécifique à un langage, à une architecture ou à un domaine, et certains sont gratuits (par
exemple Visual Studio Code), alors que d'autres ne le sont pas (par exemple la suite JetBrains).
:::

Voici quelques exemples d'erreurs de syntaxe – pourrez-vous les trouver ?

```javascript
if (seatsRemaining) {
    passengersBoarded+;
}

while (seatsRemaining > 0 {
    passengersBoarded++;
}

if (seatsRemaining > 0) {
    passengersBoarded++;
} else {
    passengersStillToBoard = 0;
```

:::info
Solutions : 1) il manque un +, 2) la parenthèse n'est pas fermée, 3) l'accolade n'est pas fermée !
:::

#### Découvrez les erreurs logiques

Les erreurs logiques sont un peu plus vicieuses. Elles surviennent quand vous avez fait des erreurs dans la logique de votre programme. Voici
quelques exemples :
- affectation d'une valeur erronée à une variable ;
- mélange de conditions dans les instructions `if` ;
- ordre incorrect d'écriture des lignes ou des blocs de code.

Avec ce genre d'erreur, votre programme pourra avoir un comportement inattendu dans le meilleur des cas, ou planter dans le pire des cas ! Les
erreurs logiques sont aussi plus difficiles à trouver et à corriger parce que le code n'est pas faux ; il ne fait simplement pas ce que vous
souhaitez qu'il fasse !

Exemple d’un code avec une erreur de logique :

```javascript
//On simule avoir 22 ans donc être majeur
const monAge = 22;
if (monAge < 18) {
    console.log("vous êtes majeur");
} else {
    console.log("vous êtes mineur");
}
```

Le code a pour objectif d’afficher “vous êtes majeur” quand vous avez 18 ans ou plus, ou alors “vous êtes mineur” si vous avez moins de 18 ans.
Mais ce code comporte une erreur de logique sur la condition if et affiche “vous êtes mineur” alors que l'âge de comparaison est 22 ans. La
difficulté ici est que rien ne vous indiquera que c’est une erreur de logique. Seules l’analyse et la relecture de votre code permettront de
déceler le souci.

#### Gérez les erreurs d'exécution

Les erreurs d'exécution sont un peu différentes. Elles tendent à survenir quand quelque chose d'inattendu se produit dans votre application. Il
s'agit souvent de quelque chose associé aux ressources extérieures (connexions réseau, appareils physiques, etc.) ou à une saisie/erreur
humaine.

Mais il y a des situations où vous savez par avance que ce type d'erreur est susceptible de survenir. Dans ces situations, vous pouvez prévoir
du code de **traitement d'erreur**. De cette façon, une erreur ne fera pas planter votre programme, et pourra être corrigée.

Une façon de traiter les erreurs potentielles consiste à utiliser une instruction `if` / `else` pour vérifier la validité des données :

```javascript
if (dataExists && dataIsValid) {
    // utiliser les données ici
} else {
    // gérer l'erreur ici
}
```

Vous pouvez aussi utiliser des blocs `try` / `catch` pour essayer (**try**) un code pouvant potentiellement renvoyer une erreur, et détecter
(**catch**) les erreurs éventuelles survenues :

```javascript
try {
    // code susceptible à l'erreur ici
} catch (error) {
    // réaction aux erreurs ici
}
```

:::info
Retrouvez un autre exemple d'utilisation de `try` / `catch` dans [le glossaire](https://openclassrooms.com/fr/courses/6175841-apprenez-a-programmer-avec-javascript/6280131-memorisez-le-vocabulaire-avec-le-glossaire).
:::

Quand vous aurez plus d'expérience en développement JavaScript, vous saurez où les erreurs peuvent survenir, et comment vous y préparer et les
traiter correctement.

### En résumé

Dans ce chapitre, vous avez appris les trois types d'erreurs de programmation :
- les erreurs de syntaxe – erreurs dans l'utilisation de JavaScript : fautes d'orthographe, crochets manquants, nombre de guillemets incorrect,
etc. ;
- les erreurs logiques – erreurs dans l'application du déroulement du programme, par exemple erreurs dans les conditions des instructions `if`
ou oubli d'incrémentation de l'indice d'une boucle, pouvant potentiellement conduire à une boucle infinie ;
- les erreurs d'exécution – erreurs souvent causées par des ressources externes telles que réseaux, bases de données ou utilisateurs ; elles
peuvent être traitées en sachant où elles peuvent survenir, et par des techniques de traitement d'erreur telles que les blocs `try` / `catch`.

_Dans le chapitre suivant, retrouvez une synthèse de ce que vous avez appris dans cette seconde partie._

-----

## Résumé de la partie 2

[Résumé de la partie 2 - Apprenez à programmer avec JavaScript - OpenClassrooms](https://openclassrooms.com/fr/courses/6175841-apprenez-a-programmer-avec-javascript/6279188-resume-de-la-partie-2)

<Vimeo vimeoId="528290767" />

<br />

Dans cette partie du cours, nous avons parlé de la **logique de programme**. Nous avons vu :
- certains **environnements** où JavaScript peut être utilisé, et la façon dont son **exécution** peut être différente d'un environnement à
l'autre ;
- les instructions conditionnelles telles que **if/else** et **switch** ;
- les **boucles** pour des sections répétitives de code, telles que for et while ;
- les différents types d'**erreurs**, et comment les **traiter**.

_Dans la partie suivante du cours, nous allons nous intéresser à différentes meilleures pratiques de méthodologie de programmation, telles que
les_ **_fonctions_** _et les_ **_méthodes_**_._

-----

## Quiz : Vérifiez ce que vous avez appris sur la logique informatique !

[Vérifiez ce que vous avez appris sur la logique informatique ! - OpenClassrooms](https://openclassrooms.com/fr/courses/6175841-apprenez-a-programmer-avec-javascript/exercises/3498)

#### Compétences évaluées

<i class="bi bi-check2-circle"></i> Gérer la logique d'un programme en JavaScript

-----

#### Question 1 : Quelle est la valeur de `message` à la fin de cet extrait ?

```javascript
let online = true;
let message = "";
if (online) {
    message = "Utilisateur en ligne !";
} else {
    message = "Utilisateur hors ligne !";
}
```

<i class="bi bi-circle"></i><code>""</code><br />
<i class="bi bi-record-circle"></i><code>"Utilisateur en ligne !"</code><br />
<i class="bi bi-circle"></i><code>"Utilisateur hors ligne !"</code><br />
<br />

*La condition online renvoie `true`, donc le code du bloc `if` est exécuté, le code du bloc `else` n'est pas exécuté.*

-----

#### Question 2 : Quelle est la valeur de `passengersBoarded` à la fin de cet extrait ?

```javascript
let passengersBoarded = 0;
if (passengersBoarded <= 10) {
    passengersBoarded += 10;
} else {
passengersBoarded -= (passengersBoarded - 10);
}
```

<i class="bi bi-circle"></i><code>0</code><br />
<i class="bi bi-circle"></i><code>-10</code><br />
<i class="bi bi-record-circle"></i><code>10</code><br />
<br />

*La variable `passengersBoarded` est initialisée à zéro, donc le code du bloc `if` est exécuté, le code du bloc `else` ne l'est pas.*

-----

#### Question 3 : De quelle condition a besoin cette instruction `if` pour que `continueBoarding` devienne `true` ?

```javascript
let passengersRemaining = true;
let planeIsFull = false;
let continueBoarding = false;
if (/* la condition va ici */) {
    continueBoarding = true;
}
```

<i class="bi bi-circle"></i><code>passengersRemaining && planeIsFul</code><br />
<i class="bi bi-circle"></i><code>passengersRemaining && continueBoarding</code><br />
<i class="bi bi-record-circle"></i><code>passengersRemaining || planeIsFull</code><br />
<i class="bi bi-circle"></i><code>planeIsFull || continueBoarding</code><br />
<br />

*L'opérateur logique OR || permet de vérifier si une condition **ou** l'autre est vraie.*

-----

#### Question 4 : Quelle est la valeur de `welcomeMessage` à la fin de cet extrait ?

```javascript
const user = {
    name: "Will Alexander",
    nationality: "Scottish",
    accountLevel: "premium",
};

let welcomeMessage = "";

switch (user.accountLevel) {
    case "Will Alexander":
        welcomeMessage = "Hi Will!";
        break;
    case "Scottish":
        welcomeMessage = "Och aye the noo!";
        break;
    case "normal":
        welcomeMessage = "Welcome back!";
        break;
    case "premium":
        welcomeMessage = "Welcome power user!";
        break;
    default:
        welcomeMessage = "Hello there!";
}
```

<i class="bi bi-circle"></i><code>"Hi Will!"</code><br />
<i class="bi bi-circle"></i><code>"Och aye the noo!"</code><br />
<i class="bi bi-record-circle"></i><code>"Welcome power user!"</code><br />
<i class="bi bi-circle"></i><code>"Hello there!"</code><br />
<br />

*L'instruction `switch` vérifie la valeur de la propriété `accountLevel` de l'objet `user`, qui a la valeur `"premium"`. C'est donc ce `case`
qui est exécuté.*

-----

#### Question 5 : Quelle est la valeur de  `vipStatus`  à la fin de cet extrait ?

```javascript
let vipStatus = "";
let guest = {
    name: "Sarah Kate",
    age: 21,
    ticket: true,
    guestType: "artist"
};

switch (guest.guestType) {
    case "artist":
        vipStatus = "Normal";
    case "star":
        vipStatus = "Important";
        break;
    case "presidential":
        vipStatus = "Mega-important";
        break;
    default:
        vipStatus = "None";
}
```

<i class="bi bi-circle"></i><code>"Normal"</code><br />
<i class="bi bi-record-circle"></i><code>"Important"</code><br />
<i class="bi bi-circle"></i><code>"Mega-imporant"</code><br />
<i class="bi bi-circle"></i><code>"None"</code><br />
<br />

*N'oubliez pas d'utiliser des instructions `break` ! Le manque de `break` à la fin du cas `"artist"` fait que le `switch` **cascade** vers le
cas suivant. On exécute les lignes jusqu'à ce qu'on trouve un break. `vipStatus` prend donc la valeur `"Important"` avant que le `switch` se
termine avec l'instruction `break`.*

-----

#### Question 6 : Combien de fois la phrase `"Oh hey!"` sera affichée dans la console ?

```javascript
for (let i = 0; i < 5; i++) {
    console.log('Oh hey!');
}
```

<i class="bi bi-circle"></i> 4<br />
<i class="bi bi-record-circle"></i> 5<br />
<i class="bi bi-circle"></i> 6<br />
<br />

*La boucle sera exécutée 5 fois, car `i` commence à zéro et s'arrête à 5.*

-----

#### Question 7 : Quelle est la valeur de `passengersBoarded` à la fin de cet extrait ?

```javascript
const passengers = [
    "Will Alexander",
    "Sarah Kate",
    "Audrey Simon",
    "Tao Perkington"
];

let passengersBoarded = 10;

for (let i in passengers) {
    passengersBoarded++;
}
```

<i class="bi bi-circle"></i> 6<br />
<i class="bi bi-circle"></i> 10<br />
<i class="bi bi-record-circle"></i> 14<br />
<i class="bi bi-circle"></i> 15<br />
<br />

*`passengersBoarded` est initialisé à 10, et la boucle est exécutée 4 fois. Le résultat final est donc 14.*

-----

#### Question 8 : Quelle sera la valeur de `vips` à la fin de cet extrait ?

```javascript
const guests = [
    {
        name: "Will Alexander",
        vip: false
    },
    {
        name: "Sarah Kate",
        vip: true
    },
    {
        name: "Audrey Simon",
        vip: true
    },
    {
        name: "Tao Perkington",
        vip: false
    }
];

let vips = 0;
let normies = 0;

for (let guest of guests) {
    if (guest.vip) {
        vips++;
    }
}
```

<i class="bi bi-circle"></i> 0<br />
<i class="bi bi-circle"></i> 1<br />
<i class="bi bi-record-circle"></i> 2<br />
<i class="bi bi-circle"></i> 4<br />
<br />

*Il y aura 2 `vips`, car la boucle est exécutée une fois pour chaque invité, et vérifie sa propriété `vip`.*

-----

#### Question 9 : Quelle sera la valeur de `guestsSeated` à la fin de cet extrait ?

```javascript
let guestsSeated = 5;

let seatsRemaining = 10;
let guestsRemaining = 7;

while (seatsRemaining > 0 && guestsRemaining > 0) {
    guestsSeated++;
    seatsRemaining--;
    guestsRemaining--;
}
```

<i class="bi bi-circle"></i> 5<br />
<i class="bi bi-circle"></i> 7<br />
<i class="bi bi-circle"></i> 10<br />
<i class="bi bi-record-circle"></i> 12<br />
<br />

*`guestsSeated` est initialisé à 5. La boucle est ensuite exécutée jusqu'à ce que `guestsRemaining` passe à zéro (ce qui arrive avant que
`seatsRemaining` passe à zéro) ; ce qui ajoute 7 invités, pour un résultat final de 12.*

